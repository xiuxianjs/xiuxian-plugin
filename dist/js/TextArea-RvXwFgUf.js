import{r as e,b as t}from"./react-vendor-B_j1QKL9.js";import{_ as n,i as a,b as o,d as r,f as i,c as l,h as s,H as u,g as c,m as d,l as f}from"./index-D64fSWen.js";import{_ as p,u as m,a6 as g,w as v,D as x,F as b,j as h,k as w,b as y}from"./EllipsisOutlined-B7G7Lika.js";import{F as C,B as z,G as S,c as E,i as $,t as A,H as N,u as I,J as O,n as R,o as j}from"./AntdIcon-BrIVTVC9.js";var F,H=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],P={};function V(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;F||((F=document.createElement("textarea")).setAttribute("tab-index","-1"),F.setAttribute("aria-hidden","true"),F.setAttribute("name","hiddenTextarea"),document.body.appendChild(F)),e.getAttribute("wrap")?F.setAttribute("wrap",e.getAttribute("wrap")):F.removeAttribute("wrap");var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&P[n])return P[n];var a=window.getComputedStyle(e),o=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),r=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),i=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),l={sizingStyle:H.map(function(e){return"".concat(e,":").concat(a.getPropertyValue(e))}).join(";"),paddingSize:r,borderSize:i,boxSizing:o};return t&&n&&(P[n]=l),l}(e,t),r=o.paddingSize,i=o.borderSize,l=o.boxSizing,s=o.sizingStyle;F.setAttribute("style","".concat(s,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),F.value=e.value||e.placeholder||"";var u,c=void 0,d=void 0,f=F.scrollHeight;if("border-box"===l?f+=i:"content-box"===l&&(f-=r),null!==n||null!==a){F.value=" ";var p=F.scrollHeight-r;null!==n&&(c=p*n,"border-box"===l&&(c=c+r+i),f=Math.max(c,f)),null!==a&&(d=p*a,"border-box"===l&&(d=d+r+i),u=f>d?"":"hidden",f=Math.min(d,f))}var m={height:f,overflowY:u,resize:"none"};return c&&(m.minHeight=c),d&&(m.maxHeight=d),m}var D=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],T=e.forwardRef(function(t,u){var c=t,d=c.prefixCls,f=c.defaultValue,x=c.value,b=c.autoSize,h=c.onResize,w=c.className,y=c.style,C=c.disabled,z=c.onChange;c.onInternalAutoSize;var S=p(c,D),E=m(f,{value:x,postState:function(e){return null!=e?e:""}}),$=n(E,2),A=$[0],N=$[1],I=e.useRef();e.useImperativeHandle(u,function(){return{textArea:I.current}});var O=e.useMemo(function(){return b&&"object"===a(b)?[b.minRows,b.maxRows]:[]},[b]),R=n(O,2),j=R[0],F=R[1],H=!!b,P=e.useState(2),T=n(P,2),k=T[0],L=T[1],M=e.useState(),W=n(M,2),B=W[0],q=W[1],K=function(){L(0)};o(function(){H&&K()},[x,j,F,H]),o(function(){if(0===k)L(1);else if(1===k){var e=V(I.current,!1,j,F);L(2),q(e)}},[k]);var G=e.useRef(),X=function(){v.cancel(G.current)};e.useEffect(function(){return X},[]);var Y=H?B:null,_=r(r({},y),Y);return 0!==k&&1!==k||(_.overflowY="hidden",_.overflowX="hidden"),e.createElement(g,{onResize:function(e){2===k&&(null==h||h(e),b&&(X(),G.current=v(function(){K()})))},disabled:!(b||h)},e.createElement("textarea",i({},S,{ref:I,style:_,className:l(d,w,s({},"".concat(d,"-disabled"),C)),disabled:C,value:A,onChange:function(e){N(e.target.value),null==z||z(e)}})))}),k=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],L=t.forwardRef(function(a,o){var c,d=a.defaultValue,f=a.value,g=a.onFocus,v=a.onBlur,x=a.onChange,b=a.allowClear,h=a.maxLength,w=a.onCompositionStart,y=a.onCompositionEnd,E=a.suffix,$=a.prefixCls,A=void 0===$?"rc-textarea":$,N=a.showCount,I=a.count,O=a.className,R=a.style,j=a.disabled,F=a.hidden,H=a.classNames,P=a.styles,V=a.onResize,D=a.onClear,L=a.onPressEnter,M=a.readOnly,W=a.autoSize,B=a.onKeyDown,q=p(a,k),K=m(d,{value:f,defaultValue:d}),G=n(K,2),X=G[0],Y=G[1],_=null==X?"":String(X),J=t.useState(!1),Q=n(J,2),U=Q[0],Z=Q[1],ee=t.useRef(!1),te=t.useState(null),ne=n(te,2),ae=ne[0],oe=ne[1],re=e.useRef(null),ie=e.useRef(null),le=function(){var e;return null===(e=ie.current)||void 0===e?void 0:e.textArea},se=function(){le().focus()};e.useImperativeHandle(o,function(){var e;return{resizableTextArea:ie.current,focus:se,blur:function(){le().blur()},nativeElement:(null===(e=re.current)||void 0===e?void 0:e.nativeElement)||le()}}),e.useEffect(function(){Z(function(e){return!j&&e})},[j]);var ue=t.useState(null),ce=n(ue,2),de=ce[0],fe=ce[1];t.useEffect(function(){var e;de&&(e=le()).setSelectionRange.apply(e,u(de))},[de]);var pe,me=C(I,N),ge=null!==(c=me.max)&&void 0!==c?c:h,ve=Number(ge)>0,xe=me.strategy(_),be=!!ge&&xe>ge,he=function(e,t){var n=t;!ee.current&&me.exceedFormatter&&me.max&&me.strategy(t)>me.max&&t!==(n=me.exceedFormatter(t,{max:me.max}))&&fe([le().selectionStart||0,le().selectionEnd||0]),Y(n),S(e.currentTarget,e,x,n)},we=E;me.show&&(pe=me.showFormatter?me.showFormatter({value:_,count:xe,maxLength:ge}):"".concat(xe).concat(ve?" / ".concat(ge):""),we=t.createElement(t.Fragment,null,we,t.createElement("span",{className:l("".concat(A,"-data-count"),null==H?void 0:H.count),style:null==P?void 0:P.count},pe)));var ye=!W&&!N&&!b;return t.createElement(z,{ref:re,value:_,allowClear:b,handleReset:function(e){Y(""),se(),S(le(),e,x)},suffix:we,prefixCls:A,classNames:r(r({},H),{},{affixWrapper:l(null==H?void 0:H.affixWrapper,s(s({},"".concat(A,"-show-count"),N),"".concat(A,"-textarea-allow-clear"),b))}),disabled:j,focused:U,className:l(O,be&&"".concat(A,"-out-of-range")),style:r(r({},R),ae&&!ye?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"==typeof pe?pe:void 0}},hidden:F,readOnly:M,onClear:D},t.createElement(T,i({},q,{autoSize:W,maxLength:h,onKeyDown:function(e){"Enter"===e.key&&L&&L(e),null==B||B(e)},onChange:function(e){he(e,e.target.value)},onFocus:function(e){Z(!0),null==g||g(e)},onBlur:function(e){Z(!1),null==v||v(e)},onCompositionStart:function(e){ee.current=!0,null==w||w(e)},onCompositionEnd:function(e){ee.current=!1,he(e,e.currentTarget.value),null==y||y(e)},className:l(null==H?void 0:H.textarea),style:r(r({},null==P?void 0:P.textarea),{},{resize:null==R?void 0:R.resize}),disabled:j,prefixCls:A,onResize:function(e){var t;null==V||V(e),null!==(t=le())&&void 0!==t&&t.style.height&&oe(!0)},ref:ie,readOnly:M})))});const M=c(["Input","TextArea"],e=>(e=>{const{componentCls:t,paddingLG:n}=e,a=`${t}-textarea`;return{[`textarea${t}`]:{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}`,resize:"vertical",[`&${t}-mouse-active`]:{transition:`all ${e.motionDurationSlow}, height 0s, width 0s`}},[`${t}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[a]:{position:"relative","&-show-count":{[`${t}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`\n        &-allow-clear > ${t},\n        &-affix-wrapper${a}-has-feedback ${t}\n      `]:{paddingInlineEnd:n},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${t}-affix-wrapper-rtl`]:{[`${t}-suffix`]:{[`${t}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${t}-affix-wrapper-sm`]:{[`${t}-suffix`]:{[`${t}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}})(d(e,E(e))),$,{resetFont:!1});const W=e.forwardRef((t,n)=>{var a;const{prefixCls:o,bordered:r=!0,size:i,disabled:s,status:u,allowClear:c,classNames:d,rootClassName:p,className:m,style:g,styles:v,variant:C,showCount:z,onMouseDown:S,onResize:E}=t,$=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(t,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:F,direction:H,allowClear:P,autoComplete:V,className:D,style:T,classNames:k,styles:W}=f("textArea"),B=e.useContext(x),q=null!=s?s:B,{status:K,hasFeedback:G,feedbackIcon:X}=e.useContext(b),Y=j(K,u),_=e.useRef(null);e.useImperativeHandle(n,()=>{var e;return{resizableTextArea:null===(e=_.current)||void 0===e?void 0:e.resizableTextArea,focus:e=>{var t,n;A(null===(n=null===(t=_.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.blur()}}});const J=F("input",o),Q=h(J),[U,Z,ee]=N(J,p),[te]=M(J,Q),{compactSize:ne,compactItemClassnames:ae}=w(J,H),oe=y(e=>{var t;return null!==(t=null!=i?i:ne)&&void 0!==t?t:e}),[re,ie]=I("textArea",C,r),le=O(null!=c?c:P),[se,ue]=e.useState(!1),[ce,de]=e.useState(!1);return U(te(e.createElement(L,Object.assign({autoComplete:V},$,{style:Object.assign(Object.assign({},T),g),styles:Object.assign(Object.assign({},W),v),disabled:q,allowClear:le,className:l(ee,Q,m,p,ae,D,ce&&`${J}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},d),k),{textarea:l({[`${J}-sm`]:"small"===oe,[`${J}-lg`]:"large"===oe},Z,null==d?void 0:d.textarea,k.textarea,se&&`${J}-mouse-active`),variant:l({[`${J}-${re}`]:ie},R(J,Y)),affixWrapper:l(`${J}-textarea-affix-wrapper`,{[`${J}-affix-wrapper-rtl`]:"rtl"===H,[`${J}-affix-wrapper-sm`]:"small"===oe,[`${J}-affix-wrapper-lg`]:"large"===oe,[`${J}-textarea-show-count`]:z||(null===(a=t.count)||void 0===a?void 0:a.show)},Z)}),prefixCls:J,suffix:G&&e.createElement("span",{className:`${J}-textarea-suffix`},X),showCount:z,ref:_,onResize:e=>{var t,n;if(null==E||E(e),se&&"function"==typeof getComputedStyle){const e=null===(n=null===(t=_.current)||void 0===t?void 0:t.nativeElement)||void 0===n?void 0:n.querySelector("textarea");e&&"both"===getComputedStyle(e).resize&&de(!0)}},onMouseDown:e=>{ue(!0),null==S||S(e);const t=()=>{ue(!1),document.removeEventListener("mouseup",t)};document.addEventListener("mouseup",t)}}))))});export{W as T};
