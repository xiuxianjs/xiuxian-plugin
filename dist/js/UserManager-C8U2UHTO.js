import{g as e,m as t,r as s,u as a,o as l,C as r,c as i,a as n,j as o,e as c}from"./index-B9mLjpt3.js";import{u as d,k as x,i as g,t as m,I as h,S as u,B as p}from"./XiuxianUserSelector-Cv7HvdtT.js";import{X as b}from"./XiuxianInfoCard-CeUN1VoY.js";import{r as j}from"./react-vendor-BsLSO1-h.js";import{M as f}from"./index-DJXgZWHj.js";import{T as v}from"./index-jPZUbwh3.js";import{R as y}from"./CloseOutlined-DCR8OVh_.js";import{l as w,p as N}from"./config-BVkDGdlV.js";import{F as S}from"./index-B0nP5e1S.js";import{T as z}from"./index-CYvgVoGm.js";import{R as O,C as L}from"./row-B43XsJyz.js";import{R as C}from"./UserOutlined-DDMUowk8.js";import{T as $}from"./index-BUFYI-Im.js";import{u as k,r as I,I as E,T as F}from"./AntdIcon-D2s3_BnZ.js";import{R as B}from"./CrownOutlined-ap4KI14Z.js";import{R}from"./SaveOutlined-DMCwDUrf.js";import{g as U,a as T,u as M}from"./game-users-C_uHgMeq.js";import{s as P}from"./index-DG5U-29d.js";import{X}from"./XiuxianStatCard-tZoCMgVa.js";import{X as D}from"./XiuxianPageWrapper-BZROkx5B.js";import{X as V}from"./XiuxianPageTitle-BrZ5mb3D.js";import{X as G}from"./XiuxianSearchBar-CB4Unp88.js";import{X as H}from"./XiuxianTableContainer-C9x-fT4S.js";import{X as A}from"./XiuxianRefreshButton-CH-kE1xv.js";import{P as W}from"./index-CHWBmS26.js";import{X as _}from"./XiuxianTableWithPagination-CPdaymVz.js";import{R as q}from"./TrophyOutlined-CD_UHO1c.js";import{R as J}from"./FireOutlined-BxInqWo_.js";import{R as K}from"./StarOutlined-D2BaoHOB.js";import{R as Q}from"./EyeOutlined-BDuMJPmV.js";import{R as Y}from"./EditOutlined-Q_h_mTgg.js";import"./context-_dVsAOM1.js";import"./index-Dw5ZynFm.js";import"./PlusOutlined-ByZyTB3m.js";import"./SearchOutlined-CRp43FdV.js";const Z=j.createContext({}),ee=e=>{const{antCls:t,componentCls:l,iconCls:r,avatarBg:i,avatarColor:n,containerSize:o,containerSizeLG:c,containerSizeSM:d,textFontSize:x,textFontSizeLG:g,textFontSizeSM:m,iconFontSize:h,iconFontSizeLG:u,iconFontSizeSM:p,borderRadius:b,borderRadiusLG:j,borderRadiusSM:f,lineWidth:v,lineType:y}=e,w=(e,t,s,a)=>({width:e,height:e,borderRadius:"50%",fontSize:t,[`&${l}-square`]:{borderRadius:a},[`&${l}-icon`]:{fontSize:s,[`> ${r}`]:{margin:0}}});return{[l]:Object.assign(Object.assign(Object.assign(Object.assign({},s(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:n,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:i,border:`${a(v)} ${y} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),w(o,x,h,b)),{"&-lg":Object.assign({},w(c,g,u,j)),"&-sm":Object.assign({},w(d,m,p,f)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},te=e=>{const{componentCls:t,groupBorderColor:s,groupOverlapping:a,groupSpace:l}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:s},"> *:not(:first-child)":{marginInlineStart:a}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:l}}}},se=e("Avatar",e=>{const{colorTextLightSolid:s,colorTextPlaceholder:a}=e,l=t(e,{avatarBg:a,avatarColor:s});return[ee(l),te(l)]},e=>{const{controlHeight:t,controlHeightLG:s,controlHeightSM:a,fontSize:l,fontSizeLG:r,fontSizeXL:i,fontSizeHeading3:n,marginXS:o,marginXXS:c,colorBorderBg:d}=e;return{containerSize:t,containerSizeLG:s,containerSizeSM:a,textFontSize:l,textFontSizeLG:l,textFontSizeSM:l,iconFontSize:Math.round((r+i)/2),iconFontSizeLG:n,iconFontSizeSM:l,groupSpace:c,groupOverlapping:-o,groupBorderColor:d}});const ae=j.forwardRef((e,t)=>{const{prefixCls:s,shape:a,size:n,src:o,srcSet:c,icon:m,className:h,rootClassName:u,style:p,alt:b,draggable:f,children:v,crossOrigin:y,gap:w=4,onError:N}=e,S=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]])}return s}(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[z,O]=j.useState(1),[L,C]=j.useState(!1),[$,E]=j.useState(!0),F=j.useRef(null),B=j.useRef(null),R=l(t,F),{getPrefixCls:U,avatar:T}=j.useContext(r),M=j.useContext(Z),P=()=>{if(!B.current||!F.current)return;const e=B.current.offsetWidth,t=F.current.offsetWidth;0!==e&&0!==t&&2*w<t&&O(t-2*w<e?(t-2*w)/e:1)};j.useEffect(()=>{C(!0)},[]),j.useEffect(()=>{E(!0),O(1)},[o]),j.useEffect(P,[w]);const X=()=>{!1!==(null==N?void 0:N())&&E(!1)},D=d(e=>{var t,s;return null!==(s=null!==(t=null!=n?n:null==M?void 0:M.size)&&void 0!==t?t:e)&&void 0!==s?s:"default"}),V=Object.keys("object"==typeof D&&D||{}).some(e=>["xs","sm","md","lg","xl","xxl"].includes(e)),G=k(V),H=j.useMemo(()=>{if("object"!=typeof D)return{};const e=I.find(e=>G[e]),t=D[e];return t?{width:t,height:t,fontSize:t&&(m||v)?t/2:18}:{}},[G,D]),A=U("avatar",s),W=x(A),[_,q,J]=se(A,W),K=i({[`${A}-lg`]:"large"===D,[`${A}-sm`]:"small"===D}),Q=j.isValidElement(o),Y=a||(null==M?void 0:M.shape)||"circle",ee=i(A,K,null==T?void 0:T.className,`${A}-${Y}`,{[`${A}-image`]:Q||o&&$,[`${A}-icon`]:!!m},J,W,h,u,q),te="number"==typeof D?{width:D,height:D,fontSize:m?D/2:18}:{};let ae;if("string"==typeof o&&$)ae=j.createElement("img",{src:o,draggable:f,srcSet:c,onError:X,alt:b,crossOrigin:y});else if(Q)ae=o;else if(m)ae=m;else if(L||1!==z){const e=`scale(${z})`,t={msTransform:e,WebkitTransform:e,transform:e};ae=j.createElement(g,{onResize:P},j.createElement("span",{className:`${A}-string`,ref:B,style:Object.assign({},t)},v))}else ae=j.createElement("span",{className:`${A}-string`,style:{opacity:0},ref:B},v);return _(j.createElement("span",Object.assign({},S,{style:Object.assign(Object.assign(Object.assign(Object.assign({},te),H),null==T?void 0:T.style),p),className:ee,ref:R}),ae))}),le=e=>{const{size:t,shape:s}=j.useContext(Z),a=j.useMemo(()=>({size:e.size||t,shape:e.shape||s}),[e.size,e.shape,t,s]);return j.createElement(Z.Provider,{value:a},e.children)},re=ae;re.Group=e=>{var t,s,a,l;const{getPrefixCls:o,direction:c}=j.useContext(r),{prefixCls:d,className:g,rootClassName:h,style:u,maxCount:p,maxStyle:b,size:f,shape:v,maxPopoverPlacement:y,maxPopoverTrigger:w,children:N,max:S}=e,z=o("avatar",d),O=`${z}-group`,L=x(z),[C,$,k]=se(z,L),I=i(O,{[`${O}-rtl`]:"rtl"===c},k,L,g,h,$),E=m(N).map((e,t)=>n(e,{key:`avatar-key-${t}`})),F=(null==S?void 0:S.count)||p,B=E.length;if(F&&F<B){const e=E.slice(0,F),r=E.slice(F,B),n=(null==S?void 0:S.style)||b,o=(null===(t=null==S?void 0:S.popover)||void 0===t?void 0:t.trigger)||w||"hover",c=(null===(s=null==S?void 0:S.popover)||void 0===s?void 0:s.placement)||y||"top",d=Object.assign(Object.assign({content:r},null==S?void 0:S.popover),{classNames:{root:i(`${O}-popover`,null===(l=null===(a=null==S?void 0:S.popover)||void 0===a?void 0:a.classNames)||void 0===l?void 0:l.root)},placement:c,trigger:o});return e.push(j.createElement(W,Object.assign({key:"avatar-popover-key",destroyOnHidden:!0},d),j.createElement(ae,{style:n},"+"+(B-F)))),C(j.createElement(le,{shape:v,size:f},j.createElement("div",{className:I,style:u},e)))}return C(j.createElement(le,{shape:v,size:f},j.createElement("div",{className:I,style:u},E)))};var ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M342 472h342c.4 0 .9 0 1.3-.1 4.4-.7 7.3-4.8 6.6-9.2l-40.2-248c-.6-3.9-4-6.7-7.9-6.7H382.2c-3.9 0-7.3 2.8-7.9 6.7l-40.2 248c-.1.4-.1.9-.1 1.3 0 4.4 3.6 8 8 8zm91.2-196h159.5l20.7 128h-201l20.8-128zm2.5 282.7c-.6-3.9-4-6.7-7.9-6.7H166.2c-3.9 0-7.3 2.8-7.9 6.7l-40.2 248c-.1.4-.1.9-.1 1.3 0 4.4 3.6 8 8 8h342c.4 0 .9 0 1.3-.1 4.4-.7 7.3-4.8 6.6-9.2l-40.2-248zM196.5 748l20.7-128h159.5l20.7 128H196.5zm709.4 58.7l-40.2-248c-.6-3.9-4-6.7-7.9-6.7H596.2c-3.9 0-7.3 2.8-7.9 6.7l-40.2 248c-.1.4-.1.9-.1 1.3 0 4.4 3.6 8 8 8h342c.4 0 .9 0 1.3-.1 4.3-.7 7.3-4.8 6.6-9.2zM626.5 748l20.7-128h159.5l20.7 128H626.5z"}}]},name:"gold",theme:"outlined"};function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ne.apply(this,arguments)}const oe=(e,t)=>j.createElement(E,ne({},e,{ref:t,icon:ie})),ce=j.forwardRef(oe);var de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},xe.apply(this,arguments)}const ge=(e,t)=>j.createElement(E,xe({},e,{ref:t,icon:de})),me=j.forwardRef(ge);var he={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"};function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ue.apply(this,arguments)}const pe=(e,t)=>j.createElement(E,ue({},e,{ref:t,icon:he})),be=j.forwardRef(pe);var je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"};function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},fe.apply(this,arguments)}const ve=(e,t)=>j.createElement(E,fe({},e,{ref:t,icon:je})),ye=j.forwardRef(ve),we=({src:e,size:t=48,name:s,online:a=!1,className:l=""})=>o.jsxs("div",{className:`relative ${l}`,children:[o.jsx(re,{src:e,size:t,className:"border-2 border-purple-500/50",children:(null==s?void 0:s.charAt(0))||"用"}),a&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-gradient-to-r from-purple-400 to-blue-500 rounded-full flex items-center justify-center",children:o.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),Ne=({userDetailVisible:e,setUserDetailVisible:t,selectedUser:s,getSexDisplay:a,getLevelName:l,getLinggenColor:r})=>{var i;return o.jsx(f,{title:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-xl font-bold text-white",children:"corrupted"===(null==s?void 0:s.数据状态)?"损坏数据详情":"用户详情"})}),open:e,onCancel:()=>t(!1),footer:null,className:"xiuxian-modal",closeIcon:o.jsx(y,{className:"text-white"}),width:"corrupted"===(null==s?void 0:s.数据状态)?1200:800,children:s&&o.jsx("div",{className:"space-y-6",children:"corrupted"===s.数据状态?o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-red-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full"}),"损坏数据 - 原始JSON内容"]}),o.jsxs("div",{className:"bg-gradient-to-br from-red-500/10 to-pink-500/10 backdrop-blur-xl border border-red-500/30 rounded-xl p-4",children:[o.jsxs("p",{className:"text-sm text-red-300 mb-2",children:["错误信息: ",s.错误信息]}),o.jsx("pre",{className:"text-xs text-slate-300 overflow-auto max-h-96 bg-slate-800/50 p-3 rounded-lg border border-slate-700/50",children:s.原始数据})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"基础信息"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(b,{label:"用户ID",value:s.id,gradient:"blue"}),o.jsx(b,{label:"名号",value:s.名号,gradient:"blue"}),o.jsx(b,{label:"性别",value:a(s.sex),gradient:"blue"}),o.jsx(b,{label:"境界",value:l(s.level_id),gradient:"blue"}),o.jsx(b,{label:"灵根",value:o.jsx(v,{color:r(s.灵根),className:"border-0",style:{background:`linear-gradient(135deg, ${r(s.灵根)}20, ${r(s.灵根)}40)`,color:r(s.灵根),border:`1px solid ${r(s.灵根)}30`},children:(null==(i=s.灵根)?void 0:i.name)||"未知"}),gradient:"blue"}),o.jsx(b,{label:"修炼效率",value:`${(100*(s.修炼效率提升||0)).toFixed(2)}%`,gradient:"blue"}),o.jsx(b,{label:"宣言",value:s.宣言||"这个人很懒还没有写",gradient:"blue",fullWidth:!0})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full"}),"战斗属性"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsx(b,{label:"攻击力",value:(s.攻击||0).toLocaleString(),gradient:"blue"}),o.jsx(b,{label:"防御力",value:(s.防御||0).toLocaleString(),gradient:"green"}),o.jsx(b,{label:"当前血量",value:(s.当前血量||0).toLocaleString(),gradient:"red"}),o.jsx(b,{label:"血量上限",value:(s.血量上限||0).toLocaleString(),gradient:"orange"}),o.jsx(b,{label:"暴击率",value:`${(100*(s.暴击率||0)).toFixed(2)}%`,gradient:"purple"}),o.jsx(b,{label:"暴击伤害",value:`${s.暴击伤害}%`,gradient:"indigo"})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"资源信息"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsx(b,{label:"灵石",value:(s.灵石||0).toLocaleString(),gradient:"green"}),o.jsx(b,{label:"神石",value:(s.神石||0).toLocaleString(),gradient:"yellow"}),o.jsx(b,{label:"轮回点",value:s.轮回点,gradient:"purple"}),o.jsx(b,{label:"修为",value:(s.修为||0).toLocaleString(),gradient:"blue"}),o.jsx(b,{label:"血气",value:(s.血气||0).toLocaleString(),gradient:"red"}),o.jsx(b,{label:"好感度",value:s.favorability,gradient:"pink"})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-white flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"成就信息"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsx(b,{label:"镇妖塔层数",value:s.镇妖塔层数,gradient:"orange"}),o.jsx(b,{label:"神魄段数",value:s.神魄段数,gradient:"indigo"}),o.jsx(b,{label:"魔道值",value:s.魔道值,gradient:"red"}),o.jsx(b,{label:"轮回次数",value:s.lunhui,gradient:"purple"}),o.jsx(b,{label:"连续签到",value:s.连续签到天数,gradient:"green"}),o.jsx(b,{label:"幸运值",value:s.幸运,gradient:"yellow"})]})]})]})})})},{Option:Se}=u;function ze({visible:e,onCancel:t,onSave:s,user:a,loading:l=!1}){const[r]=S.useForm(),[i,n]=j.useState(null);j.useEffect(()=>{e&&a&&(n({...a}),r.setFieldsValue({id:a.id,"名号":a.名号,sex:a.sex,level_id:a.level_id,"宣言":a.宣言,"攻击":a.攻击,"防御":a.防御,"当前血量":a.当前血量,"血量上限":a.血量上限,"暴击率":a.暴击率,"暴击伤害":a.暴击伤害,"灵石":a.灵石,"神石":a.神石,"轮回点":a.轮回点,"修为":a.修为,"血气":a.血气,favorability:a.favorability,"镇妖塔层数":a.镇妖塔层数,"神魄段数":a.神魄段数,"魔道值":a.魔道值,lunhui:a.lunhui,"连续签到天数":a.连续签到天数,"幸运":a.幸运}))},[e,a,r]);return o.jsx(f,{title:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xl font-bold text-white",children:"编辑用户"}),o.jsxs("span",{className:"text-slate-300",children:["用户ID: ",null==a?void 0:a.id]})]}),open:e,onCancel:t,width:1200,footer:[o.jsx(p,{onClick:t,className:"bg-slate-600 border-slate-500 text-white",children:"取消"},"cancel"),o.jsx(p,{type:"primary",icon:o.jsx(R,{}),onClick:async()=>{try{const e=await r.validateFields();if(i){const t={...i,...e};s(t)}}catch(e){}},loading:l,className:"bg-gradient-to-r from-purple-500 to-pink-500 border-0",children:"保存"},"save")],className:"user-edit-modal xiuxian-modal",children:o.jsx("div",{className:"space-y-6",children:o.jsx(S,{form:r,layout:"vertical",children:o.jsx(z,{type:"card",className:"xiuxian-tabs",tabBarStyle:{backgroundColor:"rgba(30, 41, 59, 0.8)",borderBottom:"1px solid rgba(71, 85, 105, 0.5)"},items:[{key:"basic",label:o.jsxs("span",{className:"text-white hover:text-purple-300 transition-colors flex items-center gap-2",children:[o.jsx(C,{}),"基础信息"]}),children:o.jsx("div",{className:"p-4",children:o.jsxs(O,{gutter:16,children:[o.jsx(L,{span:8,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"用户ID"}),name:"id",rules:[{required:!0,message:"请输入用户ID"}],children:o.jsx(h,{className:"xiuxian-input",disabled:!0})})}),o.jsx(L,{span:8,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"名号"}),name:"名号",rules:[{required:!0,message:"请输入名号"}],children:o.jsx(h,{className:"xiuxian-input"})})}),o.jsx(L,{span:8,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"性别"}),name:"sex",children:o.jsxs(u,{className:"xiuxian-select",children:[o.jsx(Se,{value:"男",children:"男"}),o.jsx(Se,{value:"女",children:"女"})]})})}),o.jsx(L,{span:8,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"境界"}),name:"level_id",children:o.jsx(u,{className:"xiuxian-select",children:Object.entries(w).map(([e,t])=>o.jsx(Se,{value:parseInt(e),children:t},e))})})}),o.jsx(L,{span:16,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"宣言"}),name:"宣言",children:o.jsx(h.TextArea,{rows:2,className:"xiuxian-input"})})})]})})},{key:"combat",label:o.jsxs("span",{className:"text-white hover:text-purple-300 transition-colors flex items-center gap-2",children:[o.jsx(be,{}),"战斗属性"]}),children:o.jsx("div",{className:"p-4",children:o.jsxs(O,{gutter:16,children:[o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"攻击力"}),name:"攻击",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"防御力"}),name:"防御",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"当前血量"}),name:"当前血量",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"血量上限"}),name:"血量上限",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"暴击率"}),name:"暴击率",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,max:1,step:.01,formatter:e=>`${(100*Number(e)).toFixed(2)}%`,parser:e=>(null==e?void 0:e.replace("%",""))?Number(null==e?void 0:e.replace("%",""))/100:0})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"暴击伤害"}),name:"暴击伤害",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}%`,parser:e=>(null==e?void 0:e.replace("%",""))||0})})})]})})},{key:"resources",label:o.jsxs("span",{className:"text-white hover:text-purple-300 transition-colors flex items-center gap-2",children:[o.jsx(ce,{}),"修仙资源"]}),children:o.jsx("div",{className:"p-4",children:o.jsxs(O,{gutter:16,children:[o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"灵石"}),name:"灵石",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"神石"}),name:"神石",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"轮回点"}),name:"轮回点",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"修为"}),name:"修为",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"血气"}),name:"血气",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>(null==e?void 0:e.replace(/\$\s?|(,*)/g,""))||""})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"好感度"}),name:"favorability",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})})]})})},{key:"achievements",label:o.jsxs("span",{className:"text-white hover:text-purple-300 transition-colors flex items-center gap-2",children:[o.jsx(B,{}),"修仙成就"]}),children:o.jsx("div",{className:"p-4",children:o.jsxs(O,{gutter:16,children:[o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"镇妖塔层数"}),name:"镇妖塔层数",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"神魄段数"}),name:"神魄段数",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"魔道值"}),name:"魔道值",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"轮回次数"}),name:"lunhui",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"连续签到天数"}),name:"连续签到天数",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})}),o.jsx(L,{span:6,children:o.jsx(S.Item,{label:o.jsx("span",{className:"text-slate-200",children:"幸运值"}),name:"幸运",children:o.jsx($,{className:"w-full bg-slate-700/50 border-slate-600 text-white hover:bg-white hover:text-gray-900 focus:bg-white focus:text-gray-900",min:0})})})]})})}]})})})})}function Oe(){const{gameUsers:e,loading:t,searchText:s,setSearchText:a,setSelectedUser:l,setUserDetailVisible:r,setUserEditVisible:n,stats:d,pagination:x,fetchGameUsers:g,handleSearchAndFilter:m,handleTableChange:h,handleEditUser:u,handleSaveUser:p,getSexDisplay:b,getLinggenColor:f,getLevelName:y,userDetailVisible:S,userEditVisible:z,editLoading:O,selectedUser:L}=(()=>{const{user:e}=c(),[t,s]=j.useState([]),[a,l]=j.useState(!1),[r,i]=j.useState(""),[n,o]=j.useState(null),[d,x]=j.useState(!1),[g,m]=j.useState(!1),[h,u]=j.useState(!1),[p,b]=j.useState({current:1,pageSize:N,total:0,totalPages:0}),[f,v]=j.useState({total:0,highLevel:0,mediumLevel:0,lowLevel:0,totalLingshi:0,totalShenshi:0,totalLunhui:0}),y=async(t=1,a=N)=>{if(e){l(!0);try{if(!localStorage.getItem("token"))return void P.error("未找到登录令牌");const e=await T({page:t,pageSize:a,search:r});e.success&&e.data?(s(e.data.list),b(e.data.pagination)):P.error(e.message||"获取用户数据失败")}catch(i){P.error("获取用户数据失败")}finally{l(!1)}}};j.useEffect(()=>{y(1,20),S()},[e]);const S=async()=>{if(e)try{if(!localStorage.getItem("token"))return void P.error("未找到登录令牌");const e=await U(r);e.success&&e.data&&v(e.data)}catch(t){}};return{gameUsers:t,loading:a,searchText:r,selectedUser:n,userDetailVisible:d,userEditVisible:g,editLoading:h,pagination:p,stats:f,getLevelName:e=>w[e]||`境界${e}`,getSexDisplay:e=>"0"===e?"男":"1"===e?"女":"未知",getLinggenColor:e=>{if(!e)return"default";const t=(null==e?void 0:e.name)||"";return t.includes("混沌")||t.includes("天五")||t.includes("九转")?"gold":t.includes("五灵")||t.includes("九重")?"purple":t.includes("三灵")||t.includes("双灵")?"blue":"green"},handleSearchAndFilter:()=>{y(1,p.pageSize),S()},handleTableChange:(e,t)=>{y(e,t)},handleEditUser:e=>{o(e),m(!0)},handleSaveUser:async e=>{u(!0);try{if(!localStorage.getItem("token"))return void P.error("未找到登录令牌");const t=await M(e.id,e);t.success?(P.success("用户更新成功"),m(!1),y(p.current,p.pageSize),S()):P.error(t.message||"用户更新失败")}catch(t){P.error("用户更新失败")}finally{u(!1)}},fetchGameUsers:y,fetchStats:S,setSearchText:i,setSelectedUser:o,setUserDetailVisible:x,setUserEditVisible:m}})(),$=[{title:o.jsxs("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:[o.jsx(C,{className:"text-lg"}),o.jsx("span",{children:"修仙者信息"})]}),key:"userInfo",width:220,render:(e,t)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-xl shadow-lg",children:[o.jsx(we,{src:t.avatar,size:48,name:t.名号,online:!0}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold text-white text-lg mb-1",children:t.名号}),o.jsxs("div",{className:"text-xs text-slate-400 bg-slate-700/50 px-2 py-1 rounded-full inline-block",children:["ID: ",t.id]}),o.jsxs("div",{className:"text-xs text-slate-300 mt-1",children:[o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(me,{className:"text-pink-400"}),b(t.sex)]}),o.jsx("span",{className:"mx-2 text-slate-500",children:"|"}),o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(K,{className:"text-yellow-400"}),"轮回: ",t.lunhui]})]})]})]})},{title:o.jsxs("div",{className:"flex items-center gap-2 text-blue-400 font-bold",children:[o.jsx(B,{className:"text-lg"}),o.jsx("span",{children:"境界修为"})]}),key:"level",width:160,render:(e,t)=>o.jsxs("div",{className:"p-3 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 backdrop-blur-xl border border-blue-500/30 rounded-xl shadow-lg",children:[o.jsx("div",{className:"font-bold text-blue-400 text-lg mb-2",children:w[t.level_id]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["修为: ",(t.修为||0).toLocaleString()]}),o.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["血气: ",(t.血气||0).toLocaleString()]})]})]})},{title:o.jsxs("div",{className:"flex items-center gap-2 text-green-400 font-bold",children:[o.jsx(ye,{className:"text-lg"}),o.jsx("span",{children:"灵根资质"})]}),key:"linggen",width:130,render:(e,t)=>{var s;return o.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500/10 to-emerald-500/10 backdrop-blur-xl border border-green-500/30 rounded-xl shadow-lg",children:o.jsx(v,{color:f(t.灵根),className:"text-sm font-bold px-3 py-1 border-0",children:(null==(s=t.灵根)?void 0:s.name)||"未知"})})}},{title:o.jsxs("div",{className:"flex items-center gap-2 text-red-400 font-bold",children:[o.jsx(be,{className:"text-lg"}),o.jsx("span",{children:"战斗属性"})]}),key:"combat",width:160,render:(e,t)=>o.jsx("div",{className:"p-3 bg-gradient-to-br from-red-500/10 to-orange-500/10 backdrop-blur-xl border border-red-500/30 rounded-xl shadow-lg",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["攻击: ",(t.攻击||0).toLocaleString()]}),o.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["防御: ",(t.防御||0).toLocaleString()]}),o.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["血量: ",(t.当前血量||0).toLocaleString(),"/",(t.血量上限||0).toLocaleString()]})]})})},{title:o.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 font-bold",children:[o.jsx(ce,{className:"text-lg"}),o.jsx("span",{children:"修仙资源"})]}),key:"resources",width:140,render:(e,t)=>o.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-500/10 to-amber-500/10 backdrop-blur-xl border border-yellow-500/30 rounded-xl shadow-lg",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"text-xs text-green-400 bg-slate-700/50 px-2 py-1 rounded-full font-medium",children:["灵石: ",(t.灵石||0).toLocaleString()]}),o.jsxs("div",{className:"text-xs text-yellow-400 bg-slate-700/50 px-2 py-1 rounded-full font-medium",children:["神石: ",(t.神石||0).toLocaleString()]}),o.jsxs("div",{className:"text-xs text-purple-400 bg-slate-700/50 px-2 py-1 rounded-full font-medium",children:["轮回点: ",t.轮回点]})]})})},{title:o.jsxs("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:[o.jsx(q,{className:"text-lg"}),o.jsx("span",{children:"修仙成就"})]}),key:"achievements",width:140,render:(e,t)=>o.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500/10 to-indigo-500/10 backdrop-blur-xl border border-purple-500/30 rounded-xl shadow-lg",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["镇妖塔: ",t.镇妖塔层数,"层"]}),o.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["神魄段: ",t.神魄段数,"段"]}),o.jsxs("div",{className:"text-xs text-slate-300 bg-slate-700/50 px-2 py-1 rounded-full",children:["魔道值: ",t.魔道值]})]})})},{title:o.jsxs("div",{className:"flex items-center gap-2 text-blue-400 font-bold",children:[o.jsx(Q,{className:"text-lg"}),o.jsx("span",{children:"操作"})]}),key:"actions",width:150,render:(e,t)=>o.jsxs("div",{className:"p-3 space-y-2",children:[o.jsx(F,{title:"查看修仙详情",children:o.jsxs("button",{className:"w-full px-3 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 text-sm flex items-center gap-2",onClick:()=>{l(t),r(!0)},children:[o.jsx(Q,{}),"查看"]})}),o.jsx(F,{title:"编辑用户信息",children:o.jsxs("button",{className:"w-full px-3 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 text-sm flex items-center gap-2",onClick:()=>u(t),children:[o.jsx(Y,{}),"编辑"]})})]})}];return o.jsxs(D,{children:[o.jsx(V,{icon:o.jsx(B,{}),title:"玩家管理",subtitle:"管理修仙界众位道友信息",actions:o.jsx(A,{loading:t,onClick:()=>g(1,x.pageSize)})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx(X,{title:"总修仙者",value:(d.total||0).toLocaleString(),icon:o.jsx(C,{}),gradient:"blue"}),o.jsx(X,{title:"高阶修士",value:(d.highLevel||0).toLocaleString(),icon:o.jsx(B,{}),gradient:"green"}),o.jsx(X,{title:"总灵石",value:(Number(d.totalLingshi)||0).toLocaleString("en-US",{notation:"compact",maximumFractionDigits:2}),icon:o.jsx(q,{}),gradient:"purple"}),o.jsx(X,{title:"总轮回",value:(d.totalLunhui||0).toLocaleString(),icon:o.jsx(J,{}),gradient:"yellow"})]}),o.jsx(G,{placeholder:"搜索修仙者名号或ID...",value:s,onChange:a,onSearch:m,onKeyPress:e=>"Enter"===e.key&&m(),className:"mb-6"}),o.jsx(H,{title:"修仙者列表",icon:o.jsx(C,{}),children:o.jsx(_,{columns:$,dataSource:e,rowKey:"id",loading:t,rowClassName:e=>i({"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-l-4 border-yellow-400 bg-slate-700 hover:bg-slate-600":"corrupted"===e.数据状态,"hover:bg-gradient-to-r hover:from-purple-500/10 hover:to-blue-500/10 transition-all duration-300 bg-slate-700 hover:bg-slate-600":"corrupted"!==e.数据状态}),pagination:{current:x.current,pageSize:x.pageSize,total:x.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t[0]}-${t[1]} 条，共 ${e} 条`},onPaginationChange:h,scroll:{x:1200}})}),o.jsx(Ne,{userDetailVisible:S,setUserDetailVisible:r,selectedUser:L,getSexDisplay:b,getLevelName:y,getLinggenColor:f}),o.jsx(ze,{visible:z,onCancel:()=>n(!1),onSave:p,user:L,loading:O,getSexDisplay:b,getLinggenColor:f})]})}export{Oe as default};
