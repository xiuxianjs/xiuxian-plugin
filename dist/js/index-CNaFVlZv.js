import{r as e}from"./react-vendor-B_j1QKL9.js";import{a5 as t,w as n}from"./EllipsisOutlined-B7G7Lika.js";import{g as a,m as r,r as o,l as s,c as l,a as i}from"./index-D64fSWen.js";import{p as c,S as m}from"./AntdIcon-BrIVTVC9.js";const p=t=>{const{value:n,formatter:a,precision:r,decimalSeparator:o,groupSeparator:s="",prefixCls:l}=t;let i;if("function"==typeof a)i=a(n);else{const t=String(n),a=t.match(/^(-?)(\d*)(\.(\d+))?$/);if(a&&"-"!==t){const t=a[1];let n=a[2]||"0",c=a[4]||"";n=n.replace(/\B(?=(\d{3})+(?!\d))/g,s),"number"==typeof r&&(c=c.padEnd(r,"0").slice(0,r>0?r:0)),c&&(c=`${o}${c}`),i=[e.createElement("span",{key:"int",className:`${l}-content-value-int`},t,n),c&&e.createElement("span",{key:"decimal",className:`${l}-content-value-decimal`},c)]}else i=t}return e.createElement("span",{className:`${l}-content-value`},i)},u=a("Statistic",e=>(e=>{const{componentCls:t,marginXXS:n,padding:a,colorTextDescription:r,titleFontSize:s,colorTextHeading:l,contentFontSize:i,fontFamily:c}=e;return{[t]:Object.assign(Object.assign({},o(e)),{[`${t}-title`]:{marginBottom:n,color:r,fontSize:s},[`${t}-skeleton`]:{paddingTop:a},[`${t}-content`]:{color:l,fontSize:i,fontFamily:c,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:n},[`${t}-content-suffix`]:{marginInlineStart:n}}})}})(r(e,{})),e=>{const{fontSizeHeading3:t,fontSize:n}=e;return{titleFontSize:n,contentFontSize:t}});const f=e.forwardRef((t,n)=>{const{prefixCls:a,className:r,rootClassName:o,style:i,valueStyle:f,value:d=0,title:g,valueRender:y,prefix:v,suffix:S,loading:O=!1,formatter:b,precision:x,decimalSeparator:E=".",groupSeparator:j=",",onMouseEnter:$,onMouseLeave:w}=t,h=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:N,direction:C,className:M,style:z}=s("statistic"),F=N("statistic",a),[P,k,D]=u(F),H=e.createElement(p,{decimalSeparator:E,groupSeparator:j,prefixCls:F,formatter:b,precision:x,value:d}),I=l(F,{[`${F}-rtl`]:"rtl"===C},M,r,o,k,D),R=e.useRef(null);e.useImperativeHandle(n,()=>({nativeElement:R.current}));const T=c(h,{aria:!0,data:!0});return P(e.createElement("div",Object.assign({},T,{ref:R,className:I,style:Object.assign(Object.assign({},z),i),onMouseEnter:$,onMouseLeave:w}),g&&e.createElement("div",{className:`${F}-title`},g),e.createElement(m,{paragraph:!1,loading:O,className:`${F}-skeleton`,active:!0},e.createElement("div",{style:f,className:`${F}-content`},v&&e.createElement("span",{className:`${F}-content-prefix`},v),y?y(H):H,S&&e.createElement("span",{className:`${F}-content-suffix`},S)))))}),d=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function g(e,t,n){const{format:a=""}=t,r=new Date(e).getTime(),o=Date.now();return function(e,t){let n=e;const a=/\[[^\]]*]/g,r=(t.match(a)||[]).map(e=>e.slice(1,-1)),o=t.replace(a,"[]"),s=d.reduce((e,[t,a])=>{if(e.includes(t)){const r=Math.floor(n/a);return n-=r*a,e.replace(new RegExp(`${t}+`,"g"),e=>{const t=e.length;return r.toString().padStart(t,"0")})}return e},o);let l=0;return s.replace(a,()=>{const e=r[l];return l+=1,e})}(n?Math.max(r-o,0):Math.max(o-r,0),a)}const y=a=>{const{value:r,format:o="HH:mm:ss",onChange:s,onFinish:l,type:c}=a,m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(a,["value","format","onChange","onFinish","type"]),p="countdown"===c,[u,d]=e.useState(null),y=t(()=>{const e=Date.now(),t=function(e){return new Date(e).getTime()}(r);d({});return null==s||s(p?t-e:e-t),!(p&&t<e)||(null==l||l(),!1)});e.useEffect(()=>{let e;const t=()=>{e=n(()=>{y()&&t()})};return t(),()=>n.cancel(e)},[r,p]),e.useEffect(()=>{d({})},[]);return e.createElement(f,Object.assign({},m,{value:r,valueRender:e=>i(e,{title:void 0}),formatter:(e,t)=>u?g(e,Object.assign(Object.assign({},t),{format:o}),p):"-"}))},v=t=>e.createElement(y,Object.assign({},t,{type:"countdown"})),S=e.memo(v);f.Timer=y,f.Countdown=S;export{f as S};
