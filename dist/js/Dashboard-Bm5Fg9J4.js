import{e,j as s,c as t}from"./index-D-srz3UN.js";import{l as a}from"./config-D0EtFdFc.js";import{r as l}from"./react-vendor-BNT5GVrG.js";import{a as i}from"./associations-Bp_-RRuY.js";import{g as r}from"./game-users-C1iKkPWB.js";import{g as n}from"./rankings-DsvenOM9.js";import{a as o}from"./tasks-DOXt8P9Q.js";import"./XiuxianUserSelector-CH8SfALb.js";import{X as c}from"./XiuxianStatCard-QruaNd3d.js";import{X as d}from"./XiuxianPageWrapper-D37JkaI7.js";import{X as m}from"./XiuxianPageTitle-YllwsRx5.js";import{X as x}from"./XiuxianRefreshButton-BX-id4zj.js";import{X as p}from"./XiuxianEmptyState-CHop45fN.js";import{R as u}from"./TrophyOutlined-DQ-yUYAZ.js";import{R as j}from"./UserOutlined-Dmvq0wC8.js";import{R as f}from"./TeamOutlined-C8-c6kKs.js";import{a as g,R as h}from"./ExclamationCircleOutlined-Dukc7VqG.js";import{I as b,F as v}from"./AntdIcon-CJEyrkag.js";import{R as y,C as w}from"./row-BaGI3Bd0.js";import{R as N}from"./CrownOutlined-CQfXyB70.js";import"./index-CU_LKqmm.js";var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"};function S(){return S=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},S.apply(this,arguments)}const O=(e,s)=>l.createElement(b,S({},e,{ref:s,icon:k})),P=l.forwardRef(O);function X(){const{stats:b,loading:k,fetchStats:S}=(()=>{const{user:s}=e(),[t,a]=l.useState(!1),[c,d]=l.useState(null),m=async()=>{var e,t,l,c,m,x,p,u,j;if(s){a(!0);try{if(!localStorage.getItem("token"))return;const[s,a,f,g]=await Promise.all([r(),i(),n(),o()]),h={users:{total:s.success&&(null==(e=s.data)?void 0:e.total)||0,active:s.success&&(null==(t=s.data)?void 0:t.total)||0,newToday:0},associations:{total:a.success&&(null==(l=a.data)?void 0:l.total)||0,totalMembers:a.success&&(null==(c=a.data)?void 0:c.totalMembers)||0,totalPower:a.success&&(null==(m=a.data)?void 0:m.totalPower)||0,totalLingshi:a.success&&(null==(x=a.data)?void 0:x.totalLingshi)||0},rankings:{lastUpdate:f.success&&(null==(p=f.data)?void 0:p.lastUpdate)||"",topAssociations:f.success&&(null==(u=f.data)?void 0:u.topAssociations)||[],topPlayers:f.success&&(null==(j=f.data)?void 0:j.topPlayers)||[]},system:{uptime:"7天 12小时 30分钟",lastBackup:(new Date).toISOString(),activeTasks:g.success?Object.keys(g.data||{}).length:0}};d(h)}catch(f){}finally{a(!1)}}};return l.useEffect(()=>{m()},[s]),{loading:t,stats:c,fetchStats:m}})(),O=[{title:s.jsx("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:s.jsx("span",{children:"排名"})}),key:"rank",width:60,render:(e,a,l)=>s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("span",{className:t("text-sm font-bold",{"text-yellow-400":0===l,"text-slate-400":1===l,"text-orange-400":2===l}),children:l+1})})},{title:s.jsx("div",{className:"flex items-center gap-2 text-blue-400 font-bold",children:s.jsx("span",{children:"玩家"})}),key:"name",render:(e,t)=>s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2",children:s.jsx("div",{className:"font-medium text-sm text-white",children:t.name})})},{title:s.jsx("div",{className:"flex items-center gap-2 text-green-400 font-bold",children:s.jsx("span",{children:"ID"})}),key:"id",render:(e,t)=>s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2",children:s.jsx("div",{className:"font-mono text-xs bg-slate-700/50 px-2 py-1 rounded text-slate-400",children:t.id})})},{title:s.jsx("div",{className:"flex items-center gap-2 text-yellow-400 font-bold",children:s.jsx("span",{children:"境界"})}),key:"level",render:(e,t)=>s.jsx("div",{className:"text-sm font-medium text-blue-400",children:a[t.level]})},{title:s.jsx("div",{className:"flex items-center gap-2 text-cyan-400 font-bold",children:s.jsx("span",{children:"战力"})}),key:"power",render:(e,t)=>s.jsx("div",{className:"text-sm font-bold text-green-400",children:(t.power||0).toLocaleString()})}],X=[{title:s.jsx("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:s.jsx("span",{children:"排名"})}),key:"rank",width:60,render:(e,a,l)=>s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("span",{className:t("text-sm font-bold",{"text-yellow-400":0===l,"text-slate-400":1===l,"text-orange-400":2===l}),children:l+1})})},{title:s.jsx("div",{className:"flex items-center gap-2 text-blue-400 font-bold",children:s.jsx("span",{children:"宗门"})}),key:"name",render:(e,t)=>s.jsx("div",{className:"font-medium text-sm truncate max-w-24 sm:max-w-none text-white",children:t.name})},{title:s.jsx("div",{className:"flex items-center gap-2 text-green-400 font-bold",children:s.jsx("span",{children:"成员数"})}),key:"members",render:(e,t)=>s.jsx("div",{className:"text-sm text-slate-400",children:t.members})},{title:s.jsx("div",{className:"flex items-center gap-2 text-yellow-400 font-bold",children:s.jsx("span",{children:"总战力"})}),key:"power",render:(e,t)=>s.jsx("div",{className:"text-sm font-bold text-green-400",children:(t.power||0).toLocaleString()})},{title:s.jsx("div",{className:"flex items-center gap-2 text-purple-400 font-bold",children:s.jsx("span",{children:"灵石池"})}),key:"lingshi",render:(e,t)=>s.jsx("div",{className:"text-sm font-bold text-purple-400",children:(t.lingshi||0).toLocaleString()})}];return s.jsxs(d,{children:[s.jsx(m,{icon:s.jsx(u,{}),title:"数据看板",subtitle:"修仙界数据总览",actions:s.jsx(x,{loading:k,onClick:S})}),b&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx(c,{title:"总玩家数",value:b.users.total,icon:s.jsx(j,{}),gradient:"blue",subtitle:`活跃: ${b.users.active} | 今日新增: ${b.users.newToday}`}),s.jsx(c,{title:"宗门总数",value:b.associations.total,icon:s.jsx(f,{}),gradient:"green",subtitle:`总成员: ${b.associations.totalMembers}`}),s.jsx(c,{title:"定时任务总数",value:b.system.activeTasks,icon:s.jsx(g,{}),gradient:"yellow",subtitle:`运行时间: ${b.system.uptime}`}),s.jsx(c,{title:"数据更新时间",value:new Date(b.rankings.lastUpdate).toLocaleString("zh-CN"),icon:s.jsx(P,{}),gradient:"purple",subtitle:`最后更新: ${new Date(b.rankings.lastUpdate).toLocaleString("zh-CN")}`})]}),s.jsxs(y,{gutter:[16,16],children:[s.jsx(w,{xs:24,lg:12,children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-700/30 to-slate-800/30 backdrop-blur-xl border border-slate-600/50 rounded-xl p-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(u,{className:"text-yellow-400"}),s.jsx("span",{className:"text-lg font-bold text-white",children:"玩家排行榜 TOP10"})]}),s.jsx(v,{columns:O,dataSource:b.rankings.topPlayers.slice(0,10),rowKey:"id",pagination:!1,size:"small",scroll:{x:300,y:300},rowClassName:()=>"bg-slate-700 hover:bg-slate-600",className:"xiuxian-table"})]})}),s.jsx(w,{xs:24,lg:12,children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-700/30 to-slate-800/30 backdrop-blur-xl border border-slate-600/50 rounded-xl p-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(N,{className:"text-purple-400"}),s.jsx("span",{className:"text-lg font-bold text-white",children:"宗门排行榜 TOP10"})]}),s.jsx(v,{columns:X,dataSource:b.rankings.topAssociations.slice(0,10),rowKey:"name",pagination:!1,size:"small",scroll:{x:400,y:300},rowClassName:()=>"bg-slate-700 hover:bg-slate-600",className:"xiuxian-table"})]})})]})]}),!b&&!k&&s.jsx(p,{icon:s.jsx(h,{className:"text-6xl text-slate-400"}),title:"暂无数据",description:"请点击刷新按钮获取最新数据"})]})}export{X as default};
