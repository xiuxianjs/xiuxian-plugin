import{p as e,D as s,o as r}from"./index-D64fSWen.js";import{r as a}from"./react-vendor-B_j1QKL9.js";import{R as n,C as t}from"./row-KUrmra0O.js";import{C as l,T as o}from"./AntdIcon-BrIVTVC9.js";import{R as i}from"./UserOutlined-BPw5ZWA_.js";import{D as d}from"./index-DQw-pPfg.js";import{F as c}from"./index-D88ViWFg.js";import{I as m}from"./index-Ba3ggKkW.js";import{B as x}from"./EllipsisOutlined-B7G7Lika.js";import"./index-ChgZ5ieq.js";import"./ExclamationCircleFilled-DT70Ahrp.js";import"./TextArea-RvXwFgUf.js";function h(){const{activeTab:h,setActiveTab:u,loading:w,passwordForm:j,handlePasswordChange:p,handleInputChange:P,user:f}=(()=>{const{user:r}=e(),[n,t]=a.useState("profile"),[l,o]=a.useState(!1),[i,d]=a.useState(null),[c,m]=a.useState({currentPassword:"",newPassword:"",confirmPassword:""});return{activeTab:n,setActiveTab:t,loading:l,message:i,passwordForm:c,setPasswordForm:m,handlePasswordChange:async()=>{if(o(!0),d(null),c.newPassword!==c.confirmPassword)return d({type:"error",text:"新密码与确认密码不匹配"}),void o(!1);if(c.newPassword.length<6)return d({type:"error",text:"新密码长度至少6位"}),void o(!1);try{const e=await s({currentPassword:c.currentPassword,newPassword:c.newPassword});e.success?(d({type:"success",text:e.message}),m({currentPassword:"",newPassword:"",confirmPassword:""})):d({type:"error",text:e.message})}catch(e){d({type:"error",text:"密码修改失败，请重试"})}finally{o(!1)}},handleInputChange:e=>s=>{m(r=>({...r,[e]:s.target.value}))},user:r}})(),b=[{key:"profile",label:"个人信息",children:r.jsx("div",{className:"space-y-6",children:r.jsxs(n,{gutter:[16,16],children:[r.jsx(t,{xs:24,md:12,children:r.jsx(l,{title:"用户信息",children:r.jsxs("div",{className:"text-center mb-4",children:[r.jsx(i,{className:"text-5xl mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:(null==f?void 0:f.username)??"管理员"}),r.jsx("p",{className:"text-sm",children:"系统管理员"})]})})}),r.jsx(t,{xs:24,md:12,children:r.jsx(l,{title:"基本信息",children:r.jsxs(d,{column:1,children:[r.jsx(d.Item,{label:"用户名",children:(null==f?void 0:f.username)??"admin"}),r.jsx(d.Item,{label:"角色",children:"超级管理员"}),r.jsx(d.Item,{label:"登录时间",children:(new Date).toLocaleString("zh-CN")}),r.jsx(d.Item,{label:"账户状态",children:"正常"})]})})})]})})},{key:"password",label:"修改密码",children:r.jsx(l,{title:"修改密码",children:r.jsxs(c,{layout:"vertical",onFinish:()=>{p()},children:[r.jsx(c.Item,{label:"当前密码",required:!0,children:r.jsx(m.Password,{name:"currentPassword",value:j.currentPassword,onChange:P("currentPassword"),placeholder:"请输入当前密码"})}),r.jsx(c.Item,{label:"新密码",required:!0,children:r.jsx(m.Password,{name:"newPassword",value:j.newPassword,onChange:P("newPassword"),placeholder:"请输入新密码"})}),r.jsx(c.Item,{label:"确认新密码",required:!0,children:r.jsx(m.Password,{name:"confirmPassword",value:j.confirmPassword,onChange:P("confirmPassword"),placeholder:"请再次输入新密码"})}),r.jsx(c.Item,{children:r.jsx(x,{type:"primary",htmlType:"submit",loading:w,block:!0,children:w?"修改中...":"修改密码"})})]})})}];return r.jsx("div",{className:"min-h-screen bg-gray-200 p-4",children:r.jsx(o,{activeKey:h,onChange:u,items:b})})}export{h as default};
