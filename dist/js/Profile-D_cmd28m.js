import{e,E as s,j as a}from"./index-DqAMoLsJ.js";import{r}from"./react-vendor-DusJrpQ4.js";import"./XiuxianUserSelector-CWYSj_3H.js";import{X as t}from"./XiuxianPageWrapper-CMQV25rD.js";import{X as l}from"./XiuxianInfoCard-B5WRphBd.js";import{X as n}from"./XiuxianTabGroup-B5lwNCoX.js";function d(){const{activeTab:d,setActiveTab:o,loading:i,passwordForm:c,handlePasswordChange:m,handleInputChange:x,user:u}=(()=>{const{user:a}=e(),t=localStorage.getItem("token")||"",[l,n]=r.useState("profile"),[d,o]=r.useState(!1),[i,c]=r.useState(null),[m,x]=r.useState({currentPassword:"",newPassword:"",confirmPassword:""});return{activeTab:l,setActiveTab:n,loading:d,message:i,passwordForm:m,setPasswordForm:x,handlePasswordChange:async e=>{if(e.preventDefault(),o(!0),c(null),m.newPassword!==m.confirmPassword)return c({type:"error",text:"æ–°å¯†ç ä¸ç¡®è®¤å¯†ç ä¸åŒ¹é…"}),void o(!1);if(m.newPassword.length<6)return c({type:"error",text:"æ–°å¯†ç é•¿åº¦è‡³å°‘6ä½"}),void o(!1);try{const e=await s(t,{currentPassword:m.currentPassword,newPassword:m.newPassword});e.success?(c({type:"success",text:e.message}),x({currentPassword:"",newPassword:"",confirmPassword:""})):c({type:"error",text:e.message})}catch(a){c({type:"error",text:"å¯†ç ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•"})}finally{o(!1)}},handleInputChange:e=>s=>{x(a=>({...a,[e]:s.target.value}))},user:a}})(),p=[{name:"profile",icon:"ğŸ‘¤",content:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx("span",{className:"text-white text-3xl",children:"ğŸ‘¤"})}),a.jsx("h3",{className:"text-white text-xl font-semibold mb-2",children:(null==u?void 0:u.username)||"ç®¡ç†å‘˜"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"ç³»ç»Ÿç®¡ç†å‘˜"})]})}),a.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"åŸºæœ¬ä¿¡æ¯"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-400",children:"ç”¨æˆ·å"}),a.jsx("span",{className:"text-white font-medium",children:(null==u?void 0:u.username)||"admin"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-400",children:"è§’è‰²"}),a.jsx("span",{className:"text-purple-400 font-medium",children:"è¶…çº§ç®¡ç†å‘˜"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-400",children:"ç™»å½•æ—¶é—´"}),a.jsx("span",{className:"text-white font-medium",children:(new Date).toLocaleString("zh-CN")})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-400",children:"è´¦æˆ·çŠ¶æ€"}),a.jsx("span",{className:"text-green-400 font-medium",children:"æ­£å¸¸"})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"ç³»ç»Ÿä¿¡æ¯"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(l,{label:"ç³»ç»Ÿç‰ˆæœ¬",value:"v1.3.0",gradient:"blue"}),a.jsx(l,{label:"Node.jsç‰ˆæœ¬",value:"v18.17.0",gradient:"green"}),a.jsx(l,{label:"æ•°æ®åº“ç‰ˆæœ¬",value:"MySQL 8.0",gradient:"purple"})]})]})]})},{name:"password",icon:"ğŸ”’",content:a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"ä¿®æ”¹å¯†ç "}),a.jsxs("form",{className:"space-y-4",onSubmit:m,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"å½“å‰å¯†ç "}),a.jsx("input",{type:"password",name:"currentPassword",value:c.currentPassword,onChange:x("currentPassword"),className:"w-full p-3 xiuxian-input rounded-lg",placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"æ–°å¯†ç "}),a.jsx("input",{type:"password",name:"newPassword",value:c.newPassword,onChange:x("newPassword"),className:"w-full p-3 xiuxian-input rounded-lg",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"ç¡®è®¤æ–°å¯†ç "}),a.jsx("input",{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:x("confirmPassword"),className:"w-full p-3 xiuxian-input rounded-lg",placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",required:!0})]}),a.jsx("button",{type:"submit",disabled:i,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:i?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹å¯†ç "})]})]})})}];return a.jsx(t,{children:a.jsx(n,{tabs:p,activeTab:d,onTabChange:o})})}export{d as default};
