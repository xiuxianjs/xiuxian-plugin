import{p as e,o as s,I as l,c as i}from"./index-D64fSWen.js";import{m as n}from"./config-C-P0NNBq.js";import{e as a,r,O as t}from"./react-vendor-B_j1QKL9.js";import{D as o}from"./index-GvAVA_fY.js";import{B as c}from"./EllipsisOutlined-B7G7Lika.js";import{S as d}from"./index-BVzpzorU.js";import{A as m}from"./index-C97HEmre.js";import"./index-ChgZ5ieq.js";import"./index-CdLfu89T.js";function x(){const{user:x,navigate:h,sidebarCollapsed:u,isMobile:f,mobileMenuOpen:j,handleLogout:p,toggleSidebar:v,closeMobileMenu:N}=(()=>{const s=a(),{user:l,logout:i}=e(),[n,t]=r.useState(!1),[o,c]=r.useState(!1),[d,m]=r.useState(!1);return r.useEffect(()=>{const e=()=>{c(window.innerWidth<768),window.innerWidth<768&&(t(!0),m(!1))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{user:l,logout:i,sidebarCollapsed:n,setSidebarCollapsed:t,isMobile:o,mobileMenuOpen:d,setMobileMenuOpen:m,handleLogout:()=>{i(),s("/login")},toggleSidebar:()=>{o?m(!d):t(!n)},closeMobileMenu:()=>{o&&m(!1)},navigate:s}})(),{hasPermission:b}=l(),g=n.filter(e=>!e.permission||b(e.permission));return s.jsxs("div",{className:"h-full",children:[f&&j&&s.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:N}),s.jsx("div",{className:i("fixed left-0 top-0 h-full z-50 transition-all duration-300 bg-slate-300",{"w-16":!f&&u,"w-48":!f&&!u,"w-48 transform":f,"-translate-x-full":f&&!j,"translate-x-0":f&&j}),children:s.jsxs("div",{className:"h-full",children:[s.jsxs("div",{className:"h-20 flex items-center justify-center px-4",children:[s.jsx("div",{className:"w-12 h-12 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{children:"ğŸ‘‘"})}),(!u||f)&&s.jsxs("div",{className:"ml-3 min-w-0",children:[s.jsx("div",{className:"truncate",children:"ä¿®ä»™MIS"}),s.jsx("div",{className:"text-xs",children:"ç®¡ç†ç³»ç»Ÿ"})]})]}),s.jsx("nav",{className:"px-3 py-2 flex-1 overflow-y-auto max-h-[calc(100vh-5rem)]",children:g.map(e=>s.jsx("button",{onClick:()=>{h(e.path),N()},className:"w-full mb-2",children:s.jsxs("div",{className:"flex items-center px-3 py-3",children:[s.jsx("div",{className:"text-lg flex-shrink-0",children:e.icon}),(!u||f)&&s.jsx("span",{className:"ml-3 truncate",children:e.label})]})},e.path))})]})}),s.jsxs("div",{className:i("h-full transition-all duration-300 flex flex-col",{"ml-16":!f&&u,"ml-48":!f&&!u,"ml-0":f}),children:[s.jsx("header",{className:i("fixed top-0 right-0 z-40 h-20",{"left-16":!f&&u,"left-48":!f&&!u,"left-0":f}),children:s.jsxs("div",{className:"h-full flex items-center justify-between px-4 sm:px-6",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsx("button",{onClick:v,className:"p-2",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),s.jsx("div",{className:"flex items-center",children:s.jsx(o,{menu:{items:[{key:"profile",label:"ä¸ªäººè®¾ç½®"},{key:"logout",label:"é€€å‡ºç™»å½•"}],onClick:({key:e})=>{"profile"===e?h("/profile"):"logout"===e&&p()}},trigger:["click"],children:s.jsx(c,{children:s.jsxs(d,{children:[s.jsx(m,{size:24,children:"ğŸ‘¤"}),s.jsx("span",{className:"hidden sm:block truncate max-w-24",children:(null==x?void 0:x.username)??"ç®¡ç†å‘˜"})]})})})})]})}),s.jsx("main",{className:"flex-1 overflow-y-auto pt-20",children:s.jsx(t,{})})]})]})}function h(){return s.jsx(x,{})}export{h as default};
