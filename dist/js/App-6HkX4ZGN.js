import{e,j as s,G as t,c as l}from"./index-D-srz3UN.js";import{m as r}from"./config-D0EtFdFc.js";import{e as a,r as i,O as o}from"./react-vendor-BNT5GVrG.js";function n(){const{user:n,navigate:d,sidebarCollapsed:c,isMobile:x,mobileMenuOpen:h,handleLogout:u,toggleSidebar:m,closeMobileMenu:p}=(()=>{const s=a(),{user:t,logout:l}=e(),[r,o]=i.useState(!1),[n,d]=i.useState(!1),[c,x]=i.useState(!1);return i.useEffect(()=>{const e=()=>{d(window.innerWidth<768),window.innerWidth<768&&(o(!0),x(!1))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{user:t,logout:l,sidebarCollapsed:r,setSidebarCollapsed:o,isMobile:n,mobileMenuOpen:c,setMobileMenuOpen:x,handleLogout:()=>{l(),s("/login")},toggleSidebar:()=>{n?x(!c):o(!r)},closeMobileMenu:()=>{n&&x(!1)},navigate:s}})(),{hasPermission:b}=t(),f=r.filter(e=>!e.permission||b(e.permission));return s.jsxs("div",{className:"h-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[x&&h&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:p}),s.jsx("div",{className:l("fixed left-0 top-0 h-full z-50 transition-all duration-300",{"w-16":!x&&c,"w-48":!x&&!c,"w-48 transform":x,"-translate-x-full":x&&!h,"translate-x-0":x&&h}),children:s.jsxs("div",{className:"h-full bg-gradient-to-b from-slate-800/90 to-slate-900/90 backdrop-blur-xl border-r border-slate-700/50 shadow-2xl",children:[s.jsxs("div",{className:"h-20 flex items-center justify-center border-b border-slate-700/50 px-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:s.jsx("span",{className:"text-white text-xl",children:"👑"})}),(!c||x)&&s.jsxs("div",{className:"ml-3 min-w-0",children:[s.jsx("div",{className:"text-white font-bold text-lg truncate",children:"修仙MIS"}),s.jsx("div",{className:"text-slate-400 text-xs",children:"管理系统"})]})]}),s.jsx("nav",{className:"px-3 py-2 flex-1 overflow-y-auto max-h-[calc(100vh-5rem)]",children:f.map(e=>s.jsx("button",{onClick:()=>{d(e.path),p()},className:"w-full mb-2 group relative overflow-hidden",children:s.jsxs("div",{className:"flex items-center px-3 py-3 text-slate-300 hover:text-white transition-all duration-200 rounded-xl hover:bg-gradient-to-r hover:from-purple-500/20 hover:to-pink-500/20 border border-transparent hover:border-purple-500/30",children:[s.jsx("div",{className:"text-lg flex-shrink-0",children:e.icon}),(!c||x)&&s.jsx("span",{className:"ml-3 font-medium truncate",children:e.label}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/0 to-pink-500/0 group-hover:from-purple-500/10 group-hover:to-pink-500/10 transition-all duration-300"})]})},e.path))})]})}),s.jsxs("div",{className:l("h-full transition-all duration-300 flex flex-col",{"ml-16":!x&&c,"ml-48":!x&&!c,"ml-0":x}),children:[s.jsx("header",{className:l("fixed top-0 right-0 z-40 h-20 bg-gradient-to-r from-slate-800/90 to-slate-900/90 backdrop-blur-xl border-b border-slate-700/50 shadow-lg transition-all duration-300",{"left-16":!x&&c,"left-48":!x&&!c,"left-0":x}),children:s.jsxs("div",{className:"h-full flex items-center justify-between px-4 sm:px-6",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsx("button",{onClick:m,className:"p-2 text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-lg transition-all duration-200",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),s.jsx("div",{className:"flex items-center space-x-2 sm:space-x-4",children:s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{className:"flex items-center space-x-2 px-3 sm:px-4 py-2 bg-slate-700/50 text-white rounded-lg hover:bg-slate-600/50 transition-all duration-200 border border-slate-600/50",children:[s.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center text-xs flex-shrink-0",children:"👤"}),s.jsx("span",{className:"hidden sm:block truncate max-w-24",children:(null==n?void 0:n.username)??"管理员"}),s.jsx("span",{className:"hidden sm:block",children:"▼"})]}),s.jsx("div",{className:"absolute z-10 right-0 top-full w-48 bg-slate-800/95 backdrop-blur-xl rounded-lg shadow-xl border border-slate-700/50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:s.jsxs("div",{className:"py-2",children:[s.jsx("button",{onClick:()=>{d("/profile")},className:"w-full px-4 py-2 text-left text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors duration-200",children:"👤 个人设置"}),s.jsx("button",{onClick:u,className:"w-full px-4 py-2 text-left text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors duration-200",children:"🚪 退出登录"})]})})]})})]})}),s.jsx("main",{className:"flex-1 overflow-y-auto pt-20",children:s.jsx(o,{})})]})]})}function d(){return s.jsx(n,{})}export{d as default};
