import{r as e}from"./react-vendor-B_j1QKL9.js";import{g as t,m as r,r as o,u as n,e as s,C as i,c as a,a as l}from"./index-D64fSWen.js";import{b as c,j as p,a6 as d,t as u}from"./EllipsisOutlined-B7G7Lika.js";import{u as g,r as m}from"./index-ChgZ5ieq.js";import{a as f}from"./index-CdLfu89T.js";const v=e.createContext({}),S=e=>{const{antCls:t,componentCls:r,iconCls:s,avatarBg:i,avatarColor:a,containerSize:l,containerSizeLG:c,containerSizeSM:p,textFontSize:d,textFontSizeLG:u,textFontSizeSM:g,iconFontSize:m,iconFontSizeLG:f,iconFontSizeSM:v,borderRadius:S,borderRadiusLG:h,borderRadiusSM:b,lineWidth:y,lineType:z}=e,x=(e,t,o,n)=>({width:e,height:e,borderRadius:"50%",fontSize:t,[`&${r}-square`]:{borderRadius:n},[`&${r}-icon`]:{fontSize:o,[`> ${s}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},o(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:a,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:i,border:`${n(y)} ${z} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),x(l,d,m,S)),{"&-lg":Object.assign({},x(c,u,f,h)),"&-sm":Object.assign({},x(p,g,v,b)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},h=e=>{const{componentCls:t,groupBorderColor:r,groupOverlapping:o,groupSpace:n}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:o}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:n}}}},b=t("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:o}=e,n=r(e,{avatarBg:o,avatarColor:t});return[S(n),h(n)]},e=>{const{controlHeight:t,controlHeightLG:r,controlHeightSM:o,fontSize:n,fontSizeLG:s,fontSizeXL:i,fontSizeHeading3:a,marginXS:l,marginXXS:c,colorBorderBg:p}=e;return{containerSize:t,containerSizeLG:r,containerSizeSM:o,textFontSize:n,textFontSizeLG:n,textFontSizeSM:n,iconFontSize:Math.round((s+i)/2),iconFontSizeLG:a,iconFontSizeSM:n,groupSpace:c,groupOverlapping:-l,groupBorderColor:p}});const y=e.forwardRef((t,r)=>{const{prefixCls:o,shape:n,size:l,src:u,srcSet:f,icon:S,className:h,rootClassName:y,style:z,alt:x,draggable:O,children:j,crossOrigin:C,gap:$=4,onError:E}=t,N=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(t,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[F,w]=e.useState(1),[L,M]=e.useState(!1),[k,G]=e.useState(!0),P=e.useRef(null),R=e.useRef(null),B=s(r,P),{getPrefixCls:T,avatar:H}=e.useContext(i),A=e.useContext(v),I=()=>{if(!R.current||!P.current)return;const e=R.current.offsetWidth,t=P.current.offsetWidth;0!==e&&0!==t&&2*$<t&&w(t-2*$<e?(t-2*$)/e:1)};e.useEffect(()=>{M(!0)},[]),e.useEffect(()=>{G(!0),w(1)},[u]),e.useEffect(I,[$]);const W=()=>{!1!==(null==E?void 0:E())&&G(!1)},X=c(e=>{var t,r;return null!==(r=null!==(t=null!=l?l:null==A?void 0:A.size)&&void 0!==t?t:e)&&void 0!==r?r:"default"}),q=Object.keys("object"==typeof X&&X||{}).some(e=>["xs","sm","md","lg","xl","xxl"].includes(e)),V=g(q),D=e.useMemo(()=>{if("object"!=typeof X)return{};const e=m.find(e=>V[e]),t=X[e];return t?{width:t,height:t,fontSize:t&&(S||j)?t/2:18}:{}},[V,X,S,j]),J=T("avatar",o),K=p(J),[Q,U,Y]=b(J,K),Z=a({[`${J}-lg`]:"large"===X,[`${J}-sm`]:"small"===X}),_=e.isValidElement(u),ee=n||(null==A?void 0:A.shape)||"circle",te=a(J,Z,null==H?void 0:H.className,`${J}-${ee}`,{[`${J}-image`]:_||u&&k,[`${J}-icon`]:!!S},Y,K,h,y,U),re="number"==typeof X?{width:X,height:X,fontSize:S?X/2:18}:{};let oe;if("string"==typeof u&&k)oe=e.createElement("img",{src:u,draggable:O,srcSet:f,onError:W,alt:x,crossOrigin:C});else if(_)oe=u;else if(S)oe=S;else if(L||1!==F){const t=`scale(${F})`,r={msTransform:t,WebkitTransform:t,transform:t};oe=e.createElement(d,{onResize:I},e.createElement("span",{className:`${J}-string`,ref:R,style:r},j))}else oe=e.createElement("span",{className:`${J}-string`,style:{opacity:0},ref:R},j);return Q(e.createElement("span",Object.assign({},N,{style:Object.assign(Object.assign(Object.assign(Object.assign({},re),D),null==H?void 0:H.style),z),className:te,ref:B}),oe))}),z=t=>{const{size:r,shape:o}=e.useContext(v),n=e.useMemo(()=>({size:t.size||r,shape:t.shape||o}),[t.size,t.shape,r,o]);return e.createElement(v.Provider,{value:n},t.children)},x=y;x.Group=t=>{var r,o,n,s;const{getPrefixCls:c,direction:d}=e.useContext(i),{prefixCls:g,className:m,rootClassName:v,style:S,maxCount:h,maxStyle:x,size:O,shape:j,maxPopoverPlacement:C,maxPopoverTrigger:$,children:E,max:N}=t,F=c("avatar",g),w=`${F}-group`,L=p(F),[M,k,G]=b(F,L),P=a(w,{[`${w}-rtl`]:"rtl"===d},G,L,m,v,k),R=u(E).map((e,t)=>l(e,{key:`avatar-key-${t}`})),B=(null==N?void 0:N.count)||h,T=R.length;if(B&&B<T){const t=R.slice(0,B),i=R.slice(B,T),l=(null==N?void 0:N.style)||x,c=(null===(r=null==N?void 0:N.popover)||void 0===r?void 0:r.trigger)||$||"hover",p=(null===(o=null==N?void 0:N.popover)||void 0===o?void 0:o.placement)||C||"top",d=Object.assign(Object.assign({content:i},null==N?void 0:N.popover),{classNames:{root:a(`${w}-popover`,null===(s=null===(n=null==N?void 0:N.popover)||void 0===n?void 0:n.classNames)||void 0===s?void 0:s.root)},placement:p,trigger:c});return t.push(e.createElement(f,Object.assign({key:"avatar-popover-key",destroyOnHidden:!0},d),e.createElement(y,{style:l},"+"+(T-B)))),M(e.createElement(z,{shape:j,size:O},e.createElement("div",{className:P,style:S},t)))}return M(e.createElement(z,{shape:j,size:O},e.createElement("div",{className:P,style:S},R)))};export{x as A};
