import{g as e,m as t,r as n,K as s,u as r,C as a,c as i,a as o,_ as l,b as c,d,e as u,f as m,h,i as g,j as f,k as p,t as v,l as b,n as x,o as j}from"./index-D64fSWen.js";import{r as y,b as w}from"./react-vendor-B_j1QKL9.js";import{F as S}from"./index-D88ViWFg.js";import{s as C}from"./index-CNd4JuwY.js";import{R as $,C as O}from"./row-KUrmra0O.js";import{I as N,C as _}from"./AntdIcon-BrIVTVC9.js";import{S as k}from"./index-CNaFVlZv.js";import{g as E,i as I,C as z,_ as R,u as M,o as H,a as T,b as D,B}from"./EllipsisOutlined-B7G7Lika.js";import{R as F}from"./UserOutlined-BPw5ZWA_.js";import{d as P}from"./dayjs.min-55atLurb.js";import{I as L}from"./index-Ba3ggKkW.js";import{F as V,S as A,R as W}from"./Table-CcmlabOw.js";import{R as q}from"./CrownOutlined-C1NA_heS.js";import{T as Y}from"./index-DU3lSUt0.js";import{S as G}from"./index-BVzpzorU.js";import{R as X}from"./EyeOutlined-DyWz_EC7.js";import{T as Z}from"./index-OFQobG-o.js";import{M as U}from"./index-yWgYGWn4.js";import{D as K}from"./index-B-qYguWh.js";import{R as J}from"./PlusOutlined-BzVVLDjU.js";import{R as Q}from"./ReloadOutlined-st9QP56F.js";import"./index-ChgZ5ieq.js";import"./ExclamationCircleFilled-DT70Ahrp.js";import"./InfoCircleFilled-CZmHaujc.js";import"./TextArea-RvXwFgUf.js";import"./CheckOutlined-BLh5wKOq.js";import"./DownOutlined-CLoAI_il.js";import"./index-GvAVA_fY.js";import"./context-C6B8do_o.js";import"./EditOutlined-jOoJX1ad.js";const ee=new s("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),te=new s("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),ne=new s("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),se=new s("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),re=new s("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),ae=new s("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),ie=e=>{const{fontHeight:n,lineWidth:s,marginXS:r,colorBorderBg:a}=e,i=n,o=s,l=e.colorTextLightSolid,c=e.colorError,d=e.colorErrorHover;return t(e,{badgeFontHeight:i,badgeShadowSize:o,badgeTextColor:l,badgeColor:c,badgeColorHover:d,badgeShadowColor:a,badgeProcessingDuration:"1.2s",badgeRibbonOffset:r,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},oe=e=>{const{fontSize:t,lineHeight:n,fontSizeSM:s,lineWidth:r}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*n)-2*r,indicatorHeightSM:t,dotSize:s/2,textFontSize:s,textFontSizeSM:s,textFontWeight:"normal",statusSize:s/2}},le=e("Badge",e=>(e=>{const{componentCls:t,iconCls:s,antCls:a,badgeShadowSize:i,textFontSize:o,textFontSizeSM:l,statusSize:c,dotSize:d,textFontWeight:u,indicatorHeight:m,indicatorHeightSM:h,marginXS:g,calc:f}=e,p=`${a}-scroll-number`,v=E(e,(e,{darkColor:n})=>({[`&${t} ${t}-color-${e}`]:{background:n,[`&:not(${t}-count)`]:{color:n},"a:hover &":{background:n}}}));return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},n(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:m,height:m,color:e.badgeTextColor,fontWeight:u,fontSize:o,lineHeight:r(m),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:f(m).div(2).equal(),boxShadow:`0 0 0 ${r(i)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:h,height:h,fontSize:l,lineHeight:r(h),borderRadius:f(h).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${r(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:d,minWidth:d,height:d,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${r(i)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${p}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${s}-spin`]:{animationName:ae,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:c,height:c,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:i,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:ee,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:g,color:e.colorText,fontSize:e.fontSize}}}),v),{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:te,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:ne,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:se,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:re,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${p}-custom-component, ${t}-count`]:{transform:"none"},[`${p}-custom-component, ${p}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[p]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${p}-only`]:{position:"relative",display:"inline-block",height:m,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${p}-only-unit`]:{height:m,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${p}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${p}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}})(ie(e)),oe),ce=e(["Badge","Ribbon"],e=>(e=>{const{antCls:t,badgeFontHeight:s,marginXS:a,badgeRibbonOffset:i,calc:o}=e,l=`${t}-ribbon`,c=`${t}-ribbon-wrapper`,d=E(e,(e,{darkColor:t})=>({[`&${l}-color-${e}`]:{background:t,color:t}}));return{[c]:{position:"relative"},[l]:Object.assign(Object.assign(Object.assign(Object.assign({},n(e)),{position:"absolute",top:a,padding:`0 ${r(e.paddingXS)}`,color:e.colorPrimary,lineHeight:r(s),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${l}-text`]:{color:e.badgeTextColor},[`${l}-corner`]:{position:"absolute",top:"100%",width:i,height:i,color:"currentcolor",border:`${r(o(i).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),d),{[`&${l}-placement-end`]:{insetInlineEnd:o(i).mul(-1).equal(),borderEndEndRadius:0,[`${l}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${l}-placement-start`]:{insetInlineStart:o(i).mul(-1).equal(),borderEndStartRadius:0,[`${l}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}})(ie(e)),oe),de=e=>{const{prefixCls:t,value:n,current:s,offset:r=0}=e;let a;return r&&(a={position:"absolute",top:`${r}00%`,left:0}),y.createElement("span",{style:a,className:i(`${t}-only-unit`,{current:s})},n)};function ue(e,t,n){let s=e,r=0;for(;(s+10)%10!==t;)s+=n,r+=n;return r}const me=e=>{const{prefixCls:t,count:n,value:s}=e,r=Number(s),a=Math.abs(n),[i,o]=y.useState(r),[l,c]=y.useState(a),d=()=>{o(r),c(a)};let u,m;if(y.useEffect(()=>{const e=setTimeout(d,1e3);return()=>clearTimeout(e)},[r]),i===r||Number.isNaN(r)||Number.isNaN(i))u=[y.createElement(de,Object.assign({},e,{key:r,current:!0}))],m={transition:"none"};else{u=[];const t=r+10,n=[];for(let e=r;e<=t;e+=1)n.push(e);const s=l<a?1:-1,o=n.findIndex(e=>e%10===i);u=(s<0?n.slice(0,o+1):n.slice(o)).map((t,n)=>{const r=t%10;return y.createElement(de,Object.assign({},e,{key:t,value:r,offset:s<0?n-o:n,current:n===o}))}),m={transform:`translateY(${-ue(i,r,s)}00%)`}}return y.createElement("span",{className:`${t}-only`,style:m,onTransitionEnd:d},u)};const he=y.forwardRef((e,t)=>{const{prefixCls:n,count:s,className:r,motionClassName:l,style:c,title:d,show:u,component:m="sup",children:h}=e,g=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:f}=y.useContext(a),p=f("scroll-number",n),v=Object.assign(Object.assign({},g),{"data-show":u,style:c,className:i(p,r,l),title:d});let b=s;if(s&&Number(s)%1==0){const e=String(s).split("");b=y.createElement("bdi",null,e.map((t,n)=>y.createElement(me,{prefixCls:p,count:Number(s),value:t,key:e.length-n})))}return(null==c?void 0:c.borderColor)&&(v.style=Object.assign(Object.assign({},c),{boxShadow:`0 0 0 1px ${c.borderColor} inset`})),h?o(h,e=>({className:i(`${p}-custom-component`,null==e?void 0:e.className,l)})):y.createElement(m,Object.assign({},v,{ref:t}),b)});const ge=y.forwardRef((e,t)=>{var n,s,r,l,c;const{prefixCls:d,scrollNumberPrefixCls:u,children:m,status:h,text:g,color:f,count:p=null,overflowCount:v=99,dot:b=!1,size:x="default",title:j,offset:w,style:S,className:C,rootClassName:$,classNames:O,styles:N,showZero:_=!1}=e,k=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:E,direction:R,badge:M}=y.useContext(a),H=E("badge",d),[T,D,B]=le(H),F=p>v?`${v}+`:p,P="0"===F||0===F||"0"===g||0===g,L=null===p||P&&!_,V=(null!=h||null!=f)&&L,A=null!=h||!P,W=b&&!P,q=W?"":F,Y=y.useMemo(()=>(!(null!=q&&""!==q||null!=g&&""!==g)||P&&!_)&&!W,[q,P,_,W,g]),G=y.useRef(p);Y||(G.current=p);const X=G.current,Z=y.useRef(q);Y||(Z.current=q);const U=Z.current,K=y.useRef(W);Y||(K.current=W);const J=y.useMemo(()=>{if(!w)return Object.assign(Object.assign({},null==M?void 0:M.style),S);const e={marginTop:w[1]};return"rtl"===R?e.left=Number.parseInt(w[0],10):e.right=-Number.parseInt(w[0],10),Object.assign(Object.assign(Object.assign({},e),null==M?void 0:M.style),S)},[R,w,S,null==M?void 0:M.style]),Q=null!=j?j:"string"==typeof X||"number"==typeof X?X:void 0,ee=!Y&&(0===g?_:!!g&&!0!==g),te=ee?y.createElement("span",{className:`${H}-status-text`},g):null,ne=X&&"object"==typeof X?o(X,e=>({style:Object.assign(Object.assign({},J),e.style)})):void 0,se=I(f,!1),re=i(null==O?void 0:O.indicator,null===(n=null==M?void 0:M.classNames)||void 0===n?void 0:n.indicator,{[`${H}-status-dot`]:V,[`${H}-status-${h}`]:!!h,[`${H}-color-${f}`]:se}),ae={};f&&!se&&(ae.color=f,ae.background=f);const ie=i(H,{[`${H}-status`]:V,[`${H}-not-a-wrapper`]:!m,[`${H}-rtl`]:"rtl"===R},C,$,null==M?void 0:M.className,null===(s=null==M?void 0:M.classNames)||void 0===s?void 0:s.root,null==O?void 0:O.root,D,B);if(!m&&V&&(g||A||!L)){const e=J.color;return T(y.createElement("span",Object.assign({},k,{className:ie,style:Object.assign(Object.assign(Object.assign({},null==N?void 0:N.root),null===(r=null==M?void 0:M.styles)||void 0===r?void 0:r.root),J)}),y.createElement("span",{className:re,style:Object.assign(Object.assign(Object.assign({},null==N?void 0:N.indicator),null===(l=null==M?void 0:M.styles)||void 0===l?void 0:l.indicator),ae)}),ee&&y.createElement("span",{style:{color:e},className:`${H}-status-text`},g)))}return T(y.createElement("span",Object.assign({ref:t},k,{className:ie,style:Object.assign(Object.assign({},null===(c=null==M?void 0:M.styles)||void 0===c?void 0:c.root),null==N?void 0:N.root)}),m,y.createElement(z,{visible:!Y,motionName:`${H}-zoom`,motionAppear:!1,motionDeadline:1e3},({className:e})=>{var t,n;const s=E("scroll-number",u),r=K.current,a=i(null==O?void 0:O.indicator,null===(t=null==M?void 0:M.classNames)||void 0===t?void 0:t.indicator,{[`${H}-dot`]:r,[`${H}-count`]:!r,[`${H}-count-sm`]:"small"===x,[`${H}-multiple-words`]:!r&&U&&U.toString().length>1,[`${H}-status-${h}`]:!!h,[`${H}-color-${f}`]:se});let o=Object.assign(Object.assign(Object.assign({},null==N?void 0:N.indicator),null===(n=null==M?void 0:M.styles)||void 0===n?void 0:n.indicator),J);return f&&!se&&(o=o||{},o.background=f),y.createElement(he,{prefixCls:s,show:!Y,motionClassName:e,className:a,count:U,title:Q,style:o,key:"scrollNumber"},ne)}),te))});ge.Ribbon=e=>{const{className:t,prefixCls:n,style:s,color:r,children:o,text:l,placement:c="end",rootClassName:d}=e,{getPrefixCls:u,direction:m}=y.useContext(a),h=u("ribbon",n),g=`${h}-wrapper`,[f,p,v]=ce(h,g),b=I(r,!1),x=i(h,`${h}-placement-${c}`,{[`${h}-rtl`]:"rtl"===m,[`${h}-color-${r}`]:b},t),j={},w={};return r&&!b&&(j.background=r,w.color=r),f(y.createElement("div",{className:i(g,d,p,v)},o,y.createElement("div",{className:i(x,p),style:Object.assign(Object.assign({},j),s)},y.createElement("span",{className:`${h}-text`},l),y.createElement("div",{className:`${h}-corner`,style:w}))))};var fe=function(e,t){if(!e)return null;var n={left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth,top:e.offsetTop,bottom:e.parentElement.clientHeight-e.clientHeight-e.offsetTop,height:e.clientHeight};return t?{left:0,right:0,width:0,top:n.top,bottom:n.bottom,height:n.height}:{left:n.left,right:n.right,width:n.width,top:0,bottom:0,height:0}},pe=function(e){return void 0!==e?"".concat(e,"px"):void 0};function ve(e){var t=e.prefixCls,n=e.containerRef,s=e.value,r=e.getValueIndex,a=e.motionName,o=e.onMotionStart,m=e.onMotionEnd,h=e.direction,g=e.vertical,f=void 0!==g&&g,p=y.useRef(null),v=y.useState(s),b=l(v,2),x=b[0],j=b[1],w=function(e){var s,a=r(e),i=null===(s=n.current)||void 0===s?void 0:s.querySelectorAll(".".concat(t,"-item"))[a];return(null==i?void 0:i.offsetParent)&&i},S=y.useState(null),C=l(S,2),$=C[0],O=C[1],N=y.useState(null),_=l(N,2),k=_[0],E=_[1];c(function(){if(x!==s){var e=w(x),t=w(s),n=fe(e,f),r=fe(t,f);j(s),O(n),E(r),e&&t?o():m()}},[s]);var I=y.useMemo(function(){var e;return pe(f?null!==(e=null==$?void 0:$.top)&&void 0!==e?e:0:"rtl"===h?-(null==$?void 0:$.right):null==$?void 0:$.left)},[f,h,$]),R=y.useMemo(function(){var e;return pe(f?null!==(e=null==k?void 0:k.top)&&void 0!==e?e:0:"rtl"===h?-(null==k?void 0:k.right):null==k?void 0:k.left)},[f,h,k]);return $&&k?y.createElement(z,{visible:!0,motionName:a,motionAppear:!0,onAppearStart:function(){return f?{transform:"translateY(var(--thumb-start-top))",height:"var(--thumb-start-height)"}:{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},onAppearActive:function(){return f?{transform:"translateY(var(--thumb-active-top))",height:"var(--thumb-active-height)"}:{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},onVisibleChanged:function(){O(null),E(null),m()}},function(e,n){var s=e.className,r=e.style,a=d(d({},r),{},{"--thumb-start-left":I,"--thumb-start-width":pe(null==$?void 0:$.width),"--thumb-active-left":R,"--thumb-active-width":pe(null==k?void 0:k.width),"--thumb-start-top":I,"--thumb-start-height":pe(null==$?void 0:$.height),"--thumb-active-top":R,"--thumb-active-height":pe(null==k?void 0:k.height)}),o={ref:u(p,n),style:a,className:i("".concat(t,"-thumb"),s)};return y.createElement("div",o)}):null}var be=["prefixCls","direction","vertical","options","disabled","defaultValue","value","name","onChange","className","motionName"];function xe(e){return e.map(function(e){if("object"===g(e)&&null!==e){var t=function(e){return void 0!==e.title?e.title:"object"!==g(e.label)?null===(t=e.label)||void 0===t?void 0:t.toString():void 0;var t}(e);return d(d({},e),{},{title:t})}return{label:null==e?void 0:e.toString(),title:null==e?void 0:e.toString(),value:e}})}var je=function(e){var t=e.prefixCls,n=e.className,s=e.disabled,r=e.checked,a=e.label,o=e.title,l=e.value,c=e.name,d=e.onChange,u=e.onFocus,m=e.onBlur,g=e.onKeyDown,f=e.onKeyUp,p=e.onMouseDown;return y.createElement("label",{className:i(n,h({},"".concat(t,"-item-disabled"),s)),onMouseDown:p},y.createElement("input",{name:c,className:"".concat(t,"-item-input"),type:"radio",disabled:s,checked:r,onChange:function(e){s||d(e,l)},onFocus:u,onBlur:m,onKeyDown:g,onKeyUp:f}),y.createElement("div",{className:"".concat(t,"-item-label"),title:o,"aria-selected":r},a))},ye=y.forwardRef(function(e,t){var n,s,r=e.prefixCls,a=void 0===r?"rc-segmented":r,o=e.direction,c=e.vertical,d=e.options,g=void 0===d?[]:d,f=e.disabled,p=e.defaultValue,v=e.value,b=e.name,x=e.onChange,j=e.className,w=void 0===j?"":j,S=e.motionName,C=void 0===S?"thumb-motion":S,$=R(e,be),O=y.useRef(null),N=y.useMemo(function(){return u(O,t)},[O,t]),_=y.useMemo(function(){return xe(g)},[g]),k=M(null===(n=_[0])||void 0===n?void 0:n.value,{value:v,defaultValue:p}),E=l(k,2),I=E[0],z=E[1],T=y.useState(!1),D=l(T,2),B=D[0],F=D[1],P=function(e,t){z(t),null==x||x(t)},L=H($,["children"]),V=y.useState(!1),A=l(V,2),W=A[0],q=A[1],Y=y.useState(!1),G=l(Y,2),X=G[0],Z=G[1],U=function(){Z(!0)},K=function(){Z(!1)},J=function(){q(!1)},Q=function(e){"Tab"===e.key&&q(!0)},ee=function(e){var t=_.findIndex(function(e){return e.value===I}),n=_.length,s=_[(t+e+n)%n];s&&(z(s.value),null==x||x(s.value))},te=function(e){switch(e.key){case"ArrowLeft":case"ArrowUp":ee(-1);break;case"ArrowRight":case"ArrowDown":ee(1)}};return y.createElement("div",m({role:"radiogroup","aria-label":"segmented control",tabIndex:f?void 0:0},L,{className:i(a,(s={},h(s,"".concat(a,"-rtl"),"rtl"===o),h(s,"".concat(a,"-disabled"),f),h(s,"".concat(a,"-vertical"),c),s),w),ref:N}),y.createElement("div",{className:"".concat(a,"-group")},y.createElement(ve,{vertical:c,prefixCls:a,value:I,containerRef:O,motionName:"".concat(a,"-").concat(C),direction:o,getValueIndex:function(e){return _.findIndex(function(t){return t.value===e})},onMotionStart:function(){F(!0)},onMotionEnd:function(){F(!1)}}),_.map(function(e){var t;return y.createElement(je,m({},e,{name:b,key:e.value,prefixCls:a,className:i(e.className,"".concat(a,"-item"),(t={},h(t,"".concat(a,"-item-selected"),e.value===I&&!B),h(t,"".concat(a,"-item-focused"),X&&W&&e.value===I),t)),checked:e.value===I,onChange:P,onFocus:U,onBlur:K,onKeyDown:te,onKeyUp:Q,onMouseDown:J,disabled:!!f||!!e.disabled}))})))});function we(e,t){return{[`${e}, ${e}:hover, ${e}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function Se(e){return{background:e.itemSelectedBg,boxShadow:e.boxShadowTertiary}}const Ce=Object.assign({overflow:"hidden"},v),$e=e("Segmented",e=>{const{lineWidth:s,calc:a}=e;return(e=>{const{componentCls:t}=e,s=e.calc(e.controlHeight).sub(e.calc(e.trackPadding).mul(2)).equal(),a=e.calc(e.controlHeightLG).sub(e.calc(e.trackPadding).mul(2)).equal(),i=e.calc(e.controlHeightSM).sub(e.calc(e.trackPadding).mul(2)).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n(e)),{display:"inline-block",padding:e.trackPadding,color:e.itemColor,background:e.trackBg,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`}),f(e)),{[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",flexDirection:"row",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-vertical`]:{[`${t}-group`]:{flexDirection:"column"},[`${t}-thumb`]:{width:"100%",height:0,padding:`0 ${r(e.paddingXXS)}`}},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${e.motionDurationMid}`,borderRadius:e.borderRadiusSM,transform:"translateZ(0)","&-selected":Object.assign(Object.assign({},Se(e)),{color:e.itemSelectedColor}),"&-focused":p(e),"&::after":{content:'""',position:"absolute",zIndex:-1,width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",opacity:0,transition:`opacity ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,pointerEvents:"none"},[`&:not(${t}-item-selected):not(${t}-item-disabled)`]:{"&:hover, &:active":{color:e.itemHoverColor},"&:hover::after":{opacity:1,backgroundColor:e.itemHoverBg},"&:active::after":{opacity:1,backgroundColor:e.itemActiveBg}},"&-label":Object.assign({minHeight:s,lineHeight:r(s),padding:`0 ${r(e.segmentedPaddingHorizontal)}`},Ce),"&-icon + *":{marginInlineStart:e.calc(e.marginSM).div(2).equal()},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:Object.assign(Object.assign({},Se(e)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${r(e.paddingXXS)} 0`,borderRadius:e.borderRadiusSM,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:e.borderRadiusLG,[`${t}-item-label`]:{minHeight:a,lineHeight:r(a),padding:`0 ${r(e.segmentedPaddingHorizontal)}`,fontSize:e.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadius}},[`&${t}-sm`]:{borderRadius:e.borderRadiusSM,[`${t}-item-label`]:{minHeight:i,lineHeight:r(i),padding:`0 ${r(e.segmentedPaddingHorizontalSM)}`},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadiusXS}}}),we(`&-disabled ${t}-item`,e)),we(`${t}-item-disabled`,e)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, width ${e.motionDurationSlow} ${e.motionEaseInOut}`,willChange:"transform, width"},[`&${t}-shape-round`]:{borderRadius:9999,[`${t}-item, ${t}-thumb`]:{borderRadius:9999}}})}})(t(e,{segmentedPaddingHorizontal:a(e.controlPaddingHorizontal).sub(s).equal(),segmentedPaddingHorizontalSM:a(e.controlPaddingHorizontalSM).sub(s).equal()}))},e=>{const{colorTextLabel:t,colorText:n,colorFillSecondary:s,colorBgElevated:r,colorFill:a,lineWidthBold:i,colorBgLayout:o}=e;return{trackPadding:i,trackBg:o,itemColor:t,itemHoverColor:n,itemHoverBg:s,itemSelectedBg:r,itemActiveBg:a,itemSelectedColor:n}});var Oe=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const Ne=y.forwardRef((e,t)=>{const n=T(),{prefixCls:s,className:r,rootClassName:a,block:o,options:l=[],size:c="middle",style:d,vertical:u,shape:m="default",name:h=n}=e,g=Oe(e,["prefixCls","className","rootClassName","block","options","size","style","vertical","shape","name"]),{getPrefixCls:f,direction:p,className:v,style:x}=b("segmented"),j=f("segmented",s),[w,S,C]=$e(j),$=D(c),O=y.useMemo(()=>l.map(e=>{if(function(e){return"object"==typeof e&&!!(null==e?void 0:e.icon)}(e)){const{icon:t,label:n}=e,s=Oe(e,["icon","label"]);return Object.assign(Object.assign({},s),{label:y.createElement(y.Fragment,null,y.createElement("span",{className:`${j}-item-icon`},t),n&&y.createElement("span",null,n))})}return e}),[l,j]),N=i(r,a,v,{[`${j}-block`]:o,[`${j}-sm`]:"small"===$,[`${j}-lg`]:"large"===$,[`${j}-vertical`]:u,[`${j}-shape-${m}`]:"round"===m},S,C),_=Object.assign(Object.assign({},x),d);return w(y.createElement(ye,Object.assign({},g,{name:h,className:N,style:_,options:O,ref:t,prefixCls:j,direction:p,vertical:u})))});var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"};var ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ee.apply(this,arguments)}const Ie=(e,t)=>y.createElement(N,Ee({},e,{ref:t,icon:ke})),ze=y.forwardRef(Ie);function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Re.apply(this,arguments)}const Me=(e,t)=>y.createElement(N,Re({},e,{ref:t,icon:_e})),He=y.forwardRef(Me);var Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"};function De(){return De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},De.apply(this,arguments)}const Be=(e,t)=>y.createElement(N,De({},e,{ref:t,icon:Te})),Fe=y.forwardRef(Be);var Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"};function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Le.apply(this,arguments)}const Ve=(e,t)=>y.createElement(N,Le({},e,{ref:t,icon:Pe})),Ae=y.forwardRef(Ve);var We={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qe.apply(this,arguments)}const Ye=(e,t)=>y.createElement(N,qe({},e,{ref:t,icon:We})),Ge=y.forwardRef(Ye),Xe=()=>{const[e,t]=w.useState(!1),[n,s]=w.useState([]),[r,a]=w.useState([]),[i,o]=w.useState(null),[l,c]=w.useState(null),[d,u]=w.useState("users"),[m,h]=w.useState(!1),[g,f]=w.useState(null),[p]=S.useForm(),v=async()=>{const e=await(async()=>{try{const e=await x({url:"/currency/config",method:"GET"});return 200===e.code?{success:!0,data:e.data}:{success:!1,message:e.message??"获取配置信息失败"}}catch(e){return{success:!1,message:"获取配置信息失败"}}})();e.success&&e.data?c(e.data):C.error(e.message??"获取配置信息失败")},b=async()=>{t(!0);try{const e=await(async()=>{try{const e=await x({url:"/currency/users",method:"GET"});return 200===e.code?{success:!0,data:e.data}:{success:!1,message:e.message??"获取用户数据失败"}}catch(e){return{success:!1,message:"获取用户数据失败"}}})();e.success&&e.data?s(e.data):C.error(e.message??"获取用户数据失败")}catch(e){C.error("获取用户数据失败")}t(!1)},j=async()=>{const e=await(async()=>{try{const e=await x({url:"/currency/stats",method:"GET"});return 200===e.code?{success:!0,data:e.data}:{success:!1,message:e.message??"获取统计数据失败"}}catch(e){return{success:!1,message:"获取统计数据失败"}}})();e.success&&e.data?o(e.data):C.error(e.message??"获取统计数据失败")};return w.useEffect(()=>{(async()=>{try{await Promise.all([v(),b(),j()])}catch(e){}})()},[]),{loading:e,users:n,records:r,stats:i,config:l,selectedTab:d,rechargeModalVisible:m,selectedUser:g,rechargeForm:p,setSelectedTab:u,setRechargeModalVisible:h,setSelectedUser:f,fetchUsers:b,fetchRecords:async()=>{t(!0);try{const e=await(async()=>{try{const e=await x({url:"/currency/records",method:"GET"});return 200===e.code?{success:!0,data:e.data.records}:{success:!1,message:e.message??"获取充值记录失败"}}catch(e){return{success:!1,message:"获取充值记录失败"}}})();e.success&&e.data?a(e.data):C.error(e.message??"获取充值记录失败")}catch(e){C.error("获取充值记录失败")}t(!1)},fetchStats:j,fetchConfig:v,handleRechargeOk:async e=>{try{const t=await(async e=>{try{const t=await x({url:"/currency/recharge",method:"POST",data:e});return 201===t.code?{success:!0,data:t.data}:{success:!1,message:t.message??"创建充值记录失败"}}catch(t){return{success:!1,message:"创建充值记录失败"}}})({action:e.type,userId:e.userId,tier:e.tier,paymentMethod:"admin",remark:e.remark});if(t.success&&t.data){const e=await(async e=>{try{const t=await x({url:"/currency/recharge",method:"POST",data:{action:"complete-payment",...e}});return 200===t.code?{success:!0}:{success:!1,message:t.message??"支付完成失败"}}catch(t){return{success:!1,message:"支付完成失败"}}})({recordId:t.data.id,transactionId:"ADMIN_"+Date.now(),paymentMethod:"admin"});e.success?(C.success("充值成功"),h(!1),f(null),p.resetFields(),await Promise.all([b(),j()])):C.error(e.message??"支付完成失败")}else C.error(t.message??"创建充值记录失败")}catch(t){C.error("充值操作失败，请重试")}}}};function Ze({stats:e}){return j.jsxs($,{gutter:[16,16],className:"mb-6",children:[j.jsx(O,{xs:24,sm:12,md:6,children:j.jsx(_,{className:"shadow-md",children:j.jsx(k,{title:"总充值金额",value:e.total_amount,prefix:"¥",suffix:""})})}),j.jsx(O,{xs:24,sm:12,md:6,children:j.jsx(_,{className:"shadow-md",children:j.jsx(k,{title:"总充值次数",value:e.total_count,prefix:j.jsx(ze,{})})})}),j.jsx(O,{xs:24,sm:12,md:6,children:j.jsx(_,{className:"shadow-md",children:j.jsx(k,{title:"首充用户数",value:e.first_recharge_users,prefix:j.jsx(ze,{})})})}),j.jsx(O,{xs:24,sm:12,md:6,children:j.jsx(_,{className:"shadow-md",children:j.jsx(k,{title:"今日充值",value:e.today_amount,prefix:"¥"})})})]})}function Ue({selectedTab:e,onTabChange:t,onRecordsTabClick:n}){return j.jsx("div",{className:"mb-6",children:j.jsx(Ne,{value:e,onChange:e=>{const s=e;"records"===s?n():t(s)},options:[{label:"用户货币",value:"users",icon:j.jsx(F,{})},{label:"充值记录",value:"records",icon:j.jsx(Ge,{})},{label:"统计分析",value:"stats",icon:j.jsx(ze,{})}],block:!0})})}function Ke({users:e,loading:t,onRefresh:n,onStatsRefresh:s}){const[r,a]=w.useState(""),i=[{title:"用户ID",dataIndex:"id",key:"id",width:120,render:e=>j.jsx("span",{style:{fontFamily:"monospace"},children:e})},{title:"金币余额",dataIndex:"currency",key:"currency",width:120,render:e=>j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx(Fe,{}),j.jsx("span",{children:e.toLocaleString()})]})},{title:"月卡状态",key:"monthCards",width:200,render:(e,t)=>j.jsxs("div",{children:[j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx(He,{}),j.jsx("span",{children:"小月卡:"}),j.jsx(ge,{count:P(t.small_month_card_expire_time).diff(P(),"day")+1,showZero:!0,color:t.small_month_card_expire_time>Date.now()?"blue":"default"})]}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx(q,{}),j.jsx("span",{children:"大月卡:"}),j.jsx(ge,{count:P(t.big_month_card_expire_time).diff(P(),"day")+1,showZero:!0,color:t.big_month_card_expire_time>Date.now()?"purple":"default"})]})]})},{title:"充值信息",key:"rechargeInfo",width:180,render:(e,t)=>j.jsxs("div",{children:[j.jsxs("div",{children:["总充值: ",j.jsxs("span",{children:["¥",t.total_recharge_amount]})]}),j.jsxs("div",{children:["充值次数: ",j.jsx("span",{children:t.total_recharge_count})]}),t.is_first_recharge&&j.jsx(Y,{color:"gold",icon:j.jsx(Ae,{}),children:"首充用户"})]})},{title:"时间信息",key:"timeInfo",width:200,render:(e,t)=>j.jsxs("div",{children:[j.jsxs("div",{children:["最后充值: ",j.jsx("div",{children:t.last_recharge_time?P(t.last_recharge_time).format("YYYY-MM-DD HH:mm"):"无"})]}),t.first_recharge_time&&j.jsxs("div",{children:["首充时间: ",j.jsx("div",{children:P(t.first_recharge_time).format("YYYY-MM-DD HH:mm")})]})]})}],o=e.filter(e=>e.id.toLowerCase().includes(r.toLowerCase()));return j.jsxs("div",{className:"space-y-4",children:[j.jsxs("div",{className:"flex justify-between items-center gap-4",children:[j.jsx(L.Search,{placeholder:"输入关键词搜索...",value:r,onChange:e=>a(e.target.value),onSearch:()=>{},className:"flex-1"}),j.jsxs("div",{children:["共 ",o.length," 个用户"]})]}),j.jsx(V,{columns:i,dataSource:o,loading:t,rowKey:"id",pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})]})}const{Option:Je}=A;function Qe({records:e,loading:t,config:n}){const[s,r]=w.useState(""),[a,i]=w.useState(""),[o,l]=w.useState(""),c=[{title:"记录ID",dataIndex:"id",key:"id",width:100,render:e=>j.jsx("span",{style:{fontFamily:"monospace"},children:e})},{title:"用户ID",dataIndex:"user_id",key:"user_id",width:120,render:e=>j.jsx("span",{style:{fontFamily:"monospace"},children:e})},{title:"充值类型",dataIndex:"type",key:"type",width:120,render:(e,t)=>j.jsxs("div",{children:[j.jsx(Y,{color:et(e),children:tt(e)}),t.tier&&j.jsx("div",{style:{fontSize:12,opacity:.8},children:t.tier})]})},{title:"充值金额",dataIndex:"tier",key:"amount",width:120,render:(e,t)=>{const s=(e=>{var t,s,r,a,i;if(!n)return 0;if(e===(null==(s=null==(t=n.monthCardConfig)?void 0:t.SMALL)?void 0:s.name))return n.monthCardConfig.SMALL.price;if(e===(null==(a=null==(r=n.monthCardConfig)?void 0:r.BIG)?void 0:a.name))return n.monthCardConfig.BIG.price;const o=null==(i=n.rechargeTiers)?void 0:i.find(t=>t.name===e);return(null==o?void 0:o.amount)??0})(e);return j.jsxs("div",{children:[j.jsxs("strong",{children:["¥",s]}),t.currency_gained>0&&j.jsxs("div",{style:{fontSize:12},children:["获得金币: ",t.currency_gained.toLocaleString()]}),t.month_card_days>0&&j.jsxs("div",{style:{fontSize:12},children:["月卡天数: ",t.month_card_days,"天"]})]})}},{title:"支付状态",dataIndex:"payment_status",key:"payment_status",width:100,render:e=>j.jsx(Y,{color:nt(e),children:st(e)})},{title:"支付信息",key:"paymentInfo",width:150,render:(e,t)=>j.jsxs("div",{style:{fontSize:12},children:[j.jsxs("div",{children:[j.jsx("span",{children:"方式:"}),j.jsx("span",{style:{marginLeft:4},children:t.payment_method})]}),t.transaction_id&&j.jsxs("div",{style:{fontFamily:"monospace",opacity:.8},children:[t.transaction_id.slice(0,8),"..."]})]})},{title:"时间信息",key:"timeInfo",width:180,render:(e,t)=>j.jsxs("div",{style:{fontSize:12},children:[j.jsxs("div",{children:[j.jsx("span",{children:"创建:"}),j.jsx("div",{children:P(t.created_at).format("MM-DD HH:mm")})]}),t.paid_at&&j.jsxs("div",{children:[j.jsx("span",{children:"支付:"}),j.jsx("div",{children:P(t.paid_at).format("MM-DD HH:mm")})]})]})},{title:"特殊标记",key:"special",width:100,render:(e,t)=>j.jsxs("div",{children:[t.is_first_recharge&&j.jsx(Y,{color:"gold",icon:j.jsx(Ae,{}),children:"首充"}),t.first_recharge_bonus>0&&j.jsxs("div",{style:{fontSize:12},children:["奖励: +",t.first_recharge_bonus]})]})},{title:"操作",key:"actions",width:100,render:()=>j.jsx(G,{children:j.jsx(B,{size:"small",icon:j.jsx(X,{}),children:"详情"})})}],d=e.filter(e=>{const t=e.user_id.toLowerCase().includes(s.toLowerCase())||e.id.toLowerCase().includes(s.toLowerCase()),n=!a||e.payment_status===a,r=!o||e.type===o;return t&&n&&r});return j.jsxs("div",{className:"space-y-4",children:[j.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[j.jsx("div",{className:"flex-1 min-w-0",children:j.jsx(L.Search,{placeholder:"搜索用户ID或记录ID",className:"w-full",value:s,onChange:e=>r(e.target.value),onSearch:()=>{},onKeyPress:e=>"Enter"===e.key&&r(e.target.value)})}),j.jsxs(A,{placeholder:"支付状态",allowClear:!0,style:{width:120},onChange:i,children:[j.jsx(Je,{value:"pending",children:"待支付"}),j.jsx(Je,{value:"success",children:"支付成功"}),j.jsx(Je,{value:"failed",children:"支付失败"}),j.jsx(Je,{value:"refunded",children:"已退款"})]}),j.jsxs(A,{placeholder:"充值类型",allowClear:!0,style:{width:120},onChange:l,children:[j.jsx(Je,{value:"currency",children:"金币充值"}),j.jsx(Je,{value:"small_month_card",children:"小月卡"}),j.jsx(Je,{value:"big_month_card",children:"大月卡"}),j.jsx(Je,{value:"combo",children:"组合充值"})]}),j.jsxs("div",{children:["共 ",d.length," 条记录"]})]}),j.jsx(V,{columns:c,dataSource:d,loading:t,rowKey:"id",pagination:{current:1,pageSize:20,total:d.length,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})]})}function et(e){switch(e){case"currency":return"green";case"small_month_card":return"blue";case"big_month_card":return"purple";case"combo":return"orange";default:return"default"}}function tt(e){switch(e){case"currency":return"金币充值";case"small_month_card":return"小月卡";case"big_month_card":return"大月卡";case"combo":return"组合充值";default:return e}}function nt(e){switch(e){case"pending":return"orange";case"success":return"green";case"failed":return"red";case"refunded":return"gray";default:return"default"}}function st(e){switch(e){case"pending":return"待支付";case"success":return"支付成功";case"failed":return"支付失败";case"refunded":return"已退款";default:return e}}function rt({stats:e}){return e?j.jsxs("div",{className:"space-y-6",children:[j.jsxs($,{gutter:16,children:[j.jsx(O,{span:12,children:j.jsxs(_,{children:[j.jsxs(Z.Title,{level:5,style:{marginBottom:16},children:[j.jsx(Fe,{})," 充值金额统计"]}),j.jsxs("div",{className:"space-y-4",children:[j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsx("span",{children:"总充值金额"}),j.jsxs("span",{children:["¥",e.total_amount.toLocaleString()]})]}),j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsx("span",{children:"本月充值金额"}),j.jsxs("span",{children:["¥",e.month_amount.toLocaleString()]})]}),j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsx("span",{children:"今日充值金额"}),j.jsxs("span",{children:["¥",e.today_amount.toLocaleString()]})]})]})]})}),j.jsx(O,{span:12,children:j.jsxs(_,{children:[j.jsxs(Z.Title,{level:5,style:{marginBottom:16},children:[j.jsx(ze,{})," 充值次数统计"]}),j.jsxs("div",{className:"space-y-4",children:[j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsx("span",{children:"总充值次数"}),j.jsx("span",{children:e.total_count.toLocaleString()})]}),j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsx("span",{children:"本月充值次数"}),j.jsx("span",{children:e.month_count.toLocaleString()})]}),j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsx("span",{children:"今日充值次数"}),j.jsx("span",{children:e.today_count.toLocaleString()})]})]})]})})]}),j.jsxs($,{gutter:16,children:[j.jsx(O,{span:12,children:j.jsxs(_,{children:[j.jsxs(Z.Title,{level:5,style:{marginBottom:16},children:[j.jsx(F,{})," 用户统计"]}),j.jsxs("div",{className:"space-y-4",children:[j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsx("span",{children:"首充用户数"}),j.jsx("span",{children:e.first_recharge_users.toLocaleString()})]}),j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsx("span",{children:"平均充值金额"}),j.jsxs("span",{children:["¥",e.total_count>0?(e.total_amount/e.total_count).toFixed(2):"0.00"]})]})]})]})}),j.jsx(O,{span:12,children:j.jsxs(_,{children:[j.jsxs(Z.Title,{level:5,style:{marginBottom:16},children:[j.jsx(Ge,{})," 系统信息"]}),j.jsx("div",{className:"space-y-4",children:j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsx("span",{children:"最后更新"}),j.jsx("span",{children:P(e.updated_at).format("YYYY-MM-DD HH:mm:ss")})]})})]})})]})]}):j.jsx("div",{children:"暂无数据"})}const{Option:at}=A;function it({visible:e,user:t,onCancel:n,onOk:s,form:r,config:a,users:i=[]}){var o;const[l,c]=y.useState("currency"),[d,u]=y.useState(""),[m,h]=y.useState(""),[g,f]=y.useState(null),[p,v]=y.useState(null),[b,x]=y.useState("select");y.useEffect(()=>{e&&(r.resetFields(),c("currency"),u((null==t?void 0:t.id)??""),v(t),h(""),f(null),x("select"))},[e,r,t]),y.useEffect(()=>{if(m&&(null==a?void 0:a.rechargeTiers)){const e=a.rechargeTiers.find(e=>e.name===m);e&&f(e)}else m&&(null==a?void 0:a.monthCardConfig)&&(m===a.monthCardConfig.SMALL.name?f(a.monthCardConfig.SMALL):m===a.monthCardConfig.BIG.name&&f(a.monthCardConfig.BIG))},[m,a]);const w=e=>{u(e);const t=i.find(t=>t.id===e);v(t??null),r.setFieldsValue({userId:e})},C=e=>{const t=e.target.value;u(t),v(null),r.setFieldsValue({userId:t})},$=()=>j.jsx(S.Item,{name:"userId",label:"用户ID",rules:[{required:!0,message:"请输入或选择用户ID"}],children:j.jsxs("div",{className:"space-y-3",children:[j.jsx(W.Group,{value:b,onChange:e=>{return t=e.target.value,x(t),u(""),v(null),void r.setFieldsValue({userId:void 0});var t},options:[{value:"select",label:"从列表选择"},{value:"manual",label:"手动输入"}],size:"small",className:"mb-3"}),"select"===b?j.jsx(A,{showSearch:!0,placeholder:"搜索并选择用户",value:d,onChange:w,filterOption:(e,t)=>{const n=null==t?void 0:t.children;return"string"==typeof n&&n.toLowerCase().includes(e.toLowerCase())},className:"",dropdownRender:e=>j.jsxs("div",{children:[e,j.jsx(K,{style:{margin:"8px 0"}}),j.jsxs("div",{className:"px-3 py-2",children:["共 ",i.length," 个用户"]})]}),children:i.map(e=>j.jsx(at,{value:e.id,children:j.jsxs("div",{className:"flex items-center justify-between w-full",children:[j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("span",{className:"font-mono",children:e.id}),e.is_first_recharge&&j.jsxs(Y,{color:"gold",children:[j.jsx(q,{})," 首充"]})]}),j.jsxs("div",{children:["¥",e.currency," | ",e.total_recharge_count,"次"]})]})},e.id))}):j.jsx(L,{placeholder:"请输入用户ID",value:d,onChange:C})]})});return j.jsx(U,{title:j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx(Fe,{})," ",j.jsx("span",{children:"用户充值"})]}),open:e,onCancel:n,onOk:()=>r.submit(),width:700,className:"",children:j.jsxs(S,{form:r,layout:"vertical",onFinish:s,children:[j.jsx($,{}),p&&j.jsx(_,{className:"mb-4",size:"small",children:j.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[j.jsxs("div",{children:[j.jsxs("div",{children:["用户ID: ",j.jsx("span",{className:"font-mono",children:p.id})]}),j.jsxs("div",{children:["金币余额: ",j.jsx("span",{children:p.currency.toLocaleString()})]}),j.jsxs("div",{children:["总充值: ",j.jsxs("span",{children:["¥",p.total_recharge_amount]})]})]}),j.jsxs("div",{children:[j.jsxs("div",{children:["充值次数: ",j.jsx("span",{children:p.total_recharge_count})]}),j.jsxs("div",{children:["小月卡: ",j.jsxs("span",{children:[P(p.small_month_card_expire_time).diff(P(),"day")+1,"天"]})]}),j.jsxs("div",{children:["大月卡: ",j.jsxs("span",{children:[P(p.big_month_card_expire_time).diff(P(),"day")+1,"天"]})]})]})]})}),j.jsx(S.Item,{name:"type",label:"充值类型",rules:[{required:!0,message:"请选择充值类型"}],children:j.jsxs(A,{onChange:e=>{c(e),h(""),f(null),r.setFieldsValue({tier:void 0})},className:"",children:[j.jsx(at,{value:"recharge-currency",children:"金币充值"}),j.jsx(at,{value:"recharge-small-month-card",children:"小月卡"}),j.jsx(at,{value:"recharge-big-month-card",children:"大月卡"})]})}),"recharge-currency"===l&&j.jsx(S.Item,{name:"tier",label:"充值档位",rules:[{required:!0,message:"请选择充值档位"}],children:j.jsx(A,{onChange:e=>{h(e),r.setFieldsValue({tier:e})},className:"",placeholder:"请选择充值档位",children:null==(o=null==a?void 0:a.rechargeTiers)?void 0:o.map(e=>j.jsxs(at,{value:e.name,children:[e.name," (¥",e.amount,")"]},e.key))})}),g&&j.jsx(_,{className:"mb-4",size:"small",children:j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"mb-2",children:g.name}),j.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[j.jsxs("div",{children:[j.jsxs("div",{children:["价格: ",j.jsxs("span",{children:["¥",g.amount??g.price]})]}),g.currencyGained&&j.jsxs("div",{children:["获得金币: ",j.jsx("span",{children:g.currencyGained})]}),g.days&&j.jsxs("div",{children:["月卡天数: ",j.jsxs("span",{children:[g.days,"天"]})]})]}),j.jsxs("div",{children:[g.firstRechargeBonus&&j.jsxs("div",{className:"flex items-center gap-1",children:[j.jsx(Ae,{}),"首充奖励: ",j.jsxs("span",{children:[g.firstRechargeBonus,"金币"]})]}),(null==p?void 0:p.is_first_recharge)&&j.jsxs(Y,{color:"gold",className:"mt-1",children:[j.jsx(q,{})," 首充用户"]})]})]})]})}),j.jsx(S.Item,{name:"remark",label:"备注",children:j.jsx(L.TextArea,{rows:3,placeholder:"可选备注信息"})})]})})}function ot(){const{loading:e,users:t,records:n,stats:s,config:r,selectedTab:a,rechargeModalVisible:i,selectedUser:o,rechargeForm:l,setSelectedTab:c,setRechargeModalVisible:d,setSelectedUser:u,fetchUsers:m,fetchRecords:h,fetchStats:g,fetchConfig:f,handleRechargeOk:p}=Xe();y.useEffect(()=>{m(),g()},[]);return j.jsxs("div",{className:"p-4 bg-slate-200",children:[j.jsxs("div",{className:"flex justify-between items-center mb-6",children:[j.jsxs("div",{children:[j.jsx(Z.Title,{level:3,style:{margin:0},children:"货币管理系统"}),j.jsx(Z.Paragraph,{style:{marginTop:8,marginBottom:0},children:"管理用户金币、月卡和充值记录"})]}),j.jsxs(G,{children:[j.jsx(B,{type:"primary",icon:j.jsx(J,{}),onClick:()=>{u(null),d(!0)},children:"充值"}),j.jsx(B,{icon:j.jsx(Q,{spin:e}),loading:e,onClick:()=>{m(),h(),g(),f()},children:"刷新数据"})]})]}),s&&j.jsx(Ze,{stats:s}),j.jsx(Ue,{selectedTab:a,onTabChange:c,onRecordsTabClick:()=>{c("records"),h()}}),j.jsxs(_,{title:("users"===a?"用户货币管理":"records"===a&&"充值记录管理")||"stats"===a&&"统计分析"||"货币管理",children:["users"===a&&j.jsx(Ke,{users:t,loading:e,onRefresh:m,onStatsRefresh:g}),"records"===a&&j.jsx(Qe,{records:n,loading:e,config:r}),"stats"===a&&j.jsx(rt,{stats:s})]}),j.jsx(it,{visible:i,user:o,config:r,users:t,onCancel:()=>{d(!1),u(null),l.resetFields()},onOk:e=>{p(e)},form:l})]})}export{ot as default};
