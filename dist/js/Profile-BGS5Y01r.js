import{e,E as s,j as a}from"./index-B2-_ZLms.js";import{r as t}from"./react-vendor-BNT5GVrG.js";import"./XiuxianUserSelector-V8nxbYv3.js";import{X as r}from"./XiuxianPageWrapper-Zl8u_bfP.js";import{X as l}from"./XiuxianInfoCard-OoOdQ7Gf.js";import{X as n}from"./XiuxianTabGroup-IXYKnGSI.js";function d(){const{activeTab:d,setActiveTab:o,loading:i,passwordForm:c,handlePasswordChange:m,handleInputChange:x,user:u}=(()=>{const{user:a}=e();localStorage.getItem("token");const[r,l]=t.useState("profile"),[n,d]=t.useState(!1),[o,i]=t.useState(null),[c,m]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""});return{activeTab:r,setActiveTab:l,loading:n,message:o,passwordForm:c,setPasswordForm:m,handlePasswordChange:async e=>{if(e.preventDefault(),d(!0),i(null),c.newPassword!==c.confirmPassword)return i({type:"error",text:"新密码与确认密码不匹配"}),void d(!1);if(c.newPassword.length<6)return i({type:"error",text:"新密码长度至少6位"}),void d(!1);try{const e=await s({currentPassword:c.currentPassword,newPassword:c.newPassword});e.success?(i({type:"success",text:e.message}),m({currentPassword:"",newPassword:"",confirmPassword:""})):i({type:"error",text:e.message})}catch(a){i({type:"error",text:"密码修改失败，请重试"})}finally{d(!1)}},handleInputChange:e=>s=>{m(a=>({...a,[e]:s.target.value}))},user:a}})(),p=[{name:"profile",icon:"👤",content:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx("span",{className:"text-white text-3xl",children:"👤"})}),a.jsx("h3",{className:"text-white text-xl font-semibold mb-2",children:(null==u?void 0:u.username)||"管理员"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"系统管理员"})]})}),a.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"基本信息"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-400",children:"用户名"}),a.jsx("span",{className:"text-white font-medium",children:(null==u?void 0:u.username)||"admin"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-400",children:"角色"}),a.jsx("span",{className:"text-purple-400 font-medium",children:"超级管理员"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-400",children:"登录时间"}),a.jsx("span",{className:"text-white font-medium",children:(new Date).toLocaleString("zh-CN")})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-400",children:"账户状态"}),a.jsx("span",{className:"text-green-400 font-medium",children:"正常"})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"系统信息"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(l,{label:"系统版本",value:"v1.3.0",gradient:"blue"}),a.jsx(l,{label:"Node.js版本",value:"v18.17.0",gradient:"green"}),a.jsx(l,{label:"数据库版本",value:"MySQL 8.0",gradient:"purple"})]})]})]})},{name:"password",icon:"🔒",content:a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"修改密码"}),a.jsxs("form",{className:"space-y-4",onSubmit:m,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"当前密码"}),a.jsx("input",{type:"password",name:"currentPassword",value:c.currentPassword,onChange:x("currentPassword"),className:"w-full p-3 xiuxian-input rounded-lg",placeholder:"请输入当前密码",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"新密码"}),a.jsx("input",{type:"password",name:"newPassword",value:c.newPassword,onChange:x("newPassword"),className:"w-full p-3 xiuxian-input rounded-lg",placeholder:"请输入新密码",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"确认新密码"}),a.jsx("input",{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:x("confirmPassword"),className:"w-full p-3 xiuxian-input rounded-lg",placeholder:"请再次输入新密码",required:!0})]}),a.jsx("button",{type:"submit",disabled:i,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:i?"修改中...":"修改密码"})]})]})})}];return a.jsx(r,{children:a.jsx(n,{tabs:p,activeTab:d,onTabChange:o})})}export{d as default};
