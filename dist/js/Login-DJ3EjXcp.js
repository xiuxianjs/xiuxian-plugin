import{p as e,o as s}from"./index-D64fSWen.js";import{r,e as a}from"./react-vendor-B_j1QKL9.js";import{R as t,C as i}from"./row-KUrmra0O.js";import{I as n,C as o}from"./AntdIcon-BrIVTVC9.js";import{T as l}from"./index-OFQobG-o.js";import{A as c}from"./index-DFMXDXNR.js";import{F as m}from"./index-D88ViWFg.js";import{I as d}from"./index-Ba3ggKkW.js";import{R as p}from"./UserOutlined-BPw5ZWA_.js";import{B as j}from"./EllipsisOutlined-B7G7Lika.js";import"./index-ChgZ5ieq.js";import"./EditOutlined-jOoJX1ad.js";import"./CheckOutlined-BLh5wKOq.js";import"./TextArea-RvXwFgUf.js";import"./ExclamationCircleFilled-DT70Ahrp.js";import"./InfoCircleFilled-CZmHaujc.js";var h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};function x(){return x=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x.apply(this,arguments)}const u=(e,s)=>r.createElement(n,x({},e,{ref:s,icon:h})),f=r.forwardRef(u),{Title:g,Text:v}=l;function y(){const{loading:n,error:l,onFinish:h}=(()=>{const[s,t]=r.useState(!1),[i,n]=r.useState(""),{login:o}=e(),l=a(),c=async e=>{t(!0),n("");try{const s=await o(e.username,e.password);s.success?l("/"):n(s.message??"登录失败")}catch(s){n("错误，请重试")}finally{t(!1)}};return{loading:s,error:i,handleSubmit:e=>{e.preventDefault();const s=new FormData(e.target),r=s.get("username"),a=s.get("password");r&&a?c({username:r,password:a}):n("请输入用户名和密码")},onFinish:c}})();return s.jsx(t,{align:"middle",justify:"center",className:"min-h-screen bg-gray-100 p-4",children:s.jsxs(i,{xs:24,sm:20,md:12,lg:8,xl:7,xxl:6,children:[s.jsx(o,{className:"shadow-lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(g,{level:3,className:"mb-2",children:"管理员登录"}),s.jsx(v,{type:"secondary",children:"请输入您的管理员账号和密码"})]}),l&&s.jsx(c,{type:"error",message:"登录失败",description:l,showIcon:!0,className:"mb-4"}),s.jsxs(m,{layout:"vertical",onFinish:e=>{h(e)},children:[s.jsx(m.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{min:3,message:"用户名至少3个字符"}],children:s.jsx(d,{prefix:s.jsx(p,{}),placeholder:"请输入管理员用户名",autoComplete:"username"})}),s.jsx(m.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"},{min:6,message:"密码至少6个字符"}],children:s.jsx(d.Password,{prefix:s.jsx(f,{}),placeholder:"请输入密码",autoComplete:"current-password"})}),s.jsx(m.Item,{children:s.jsx(j,{type:"primary",htmlType:"submit",loading:n,block:!0,children:"登录"})})]})]})}),s.jsx("div",{className:"text-center mt-4",children:s.jsx(v,{type:"secondary",children:"© 2024 修仙管理系统"})}),s.jsx(c,{className:"mt-4",type:"info",message:"安全提醒",description:"请确保在安全的环境下登录，不要在公共场所保存密码。",showIcon:!0})]})})}export{y as default};
